!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).minitaur=t()}(this,function(){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}
/*!
    minitaur v0.1.0 (https://github.com/kodie/minitaur)
    by Kodie Grantham (https://kodieg.com)
  */()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function L(e,o){var t=[],r=[];if(e&&e.constructor===Object&&(o=e,e=null),o=L.mergeObjects(L.defaultOptions,o||{}),"string"==typeof(e=e||o.mount)?t=document.querySelectorAll(e):e instanceof HTMLElement?t=[e]:e||(t=[document.createElement("div")]),(t=L.getModals(t))&&t.length)for(var n=0;n<t.length;n++)!function(n){if(n.minitaur)return;if(!o.beforeInit||!1!==o.beforeInit(n)){L.modalCount++;var e={close:function(e){return L.close(n,e)},get:function(e){return L.get(n,e,!1)},kill:function(e){return L.kill(n,e)},open:function(e){return L.open(n,e)},set:function(e,t){return L.set(n,e,t)},toggle:function(e){return L.toggle(n,e)}},t=L.parseOptions(L.mergeObjects(o,L.parseAttributes(n.dataset),e,{isOpen:!1}));if(n.parentNode&&n.parentNode!==document.body&&(t.originalElement=n.cloneNode(!0),t.originalElementIndex=Array.prototype.indexOf.call(n.parentNode.childNodes,n),t.originalElementParent=n.parentNode,n.parentNode.removeChild(n)),n.minitaur=t,n.setAttribute("data-minitaur",""),(t=L.get(n,!0,!1)).id?n.id=t.id:n.id||(n.id="minitaur-"+L.modalCount),E&&console.log("minitaur.init (#"+n.id+"):",t),t.class){"string"==typeof t.class&&(t.class=[t.class]);for(var i=0;i<t.class.length;i++)n.classList.add(t.class[i])}L.setStyle(n,L.mergeObjects(t.style||{},t.closeStyle||{})),L.initiateTriggers(n),n.parentNode||document.body.appendChild(n),t.opened?n.minitaur.open():n.minitaur.close(),t.afterInit&&o.afterInit(n),r.push(n)}}(t[n]);return L.initiated||(L.initiated=!0,document.addEventListener("click",L.documentClick),window.addEventListener("resize",L.documentResize),window.addEventListener("scroll",L.documentScroll)),!!r.length&&(1===r.length?r[0]:r)}var E=void 0!==window.minitaurDebug&&window.minitaurDebug;return L.initiated=!1,L.modalCount=0,L.defaultOptions={afterClose:null,afterInit:null,afterOpen:null,anchor:null,backdropClass:"minitaur-backdrop",backdropClosingStyle:null,backdropOpeningStyle:null,backdropStyle:{backgroundColor:"rgba(0, 0, 0, 0.5)"},beforeClose:null,beforeInit:null,beforeOpen:null,breakpoints:null,class:"minitaur",closeClass:"closed",closeDuration:0,closingClass:"closing",closingStyle:null,closeOnFocusOut:!0,closeStyle:{display:"none",visibility:"hidden"},content:null,id:null,mount:".minitaur, [data-minitaur]",opened:!1,openClass:"opened",openDuration:0,openingClass:"opening",openingStyle:{display:"block",visibility:"visible"},openStyle:null,parameters:null,position:"middle",respectAnchorSpacing:!1,stayInBounds:!0,style:null,takeover:!1,triggers:[]},L.clearTimers=function(e){L.resizeTimer&&(clearTimeout(L.resizeTimer),L.resizeTimer=null),e&&(e.minitaur.closeDurationTimer&&(clearTimeout(e.minitaur.closeDurationTimer),e.minitaur.closeDurationTimer=null),e.minitaur.openDurationTimer&&(clearTimeout(e.minitaur.openDurationTimer),e.minitaur.openDurationTimer=null))},L.close=function(e,r){e=L.getModals(e,!0);for(var t=0;t<e.length;t++)!function(e){r&&e.minitaur.set(r);var t,n,i,o=L.get(e,!0,!1);E&&console.log("minitaur.close (#"+e.id+"):",o),L.clearTimers(e),o.beforeClose&&!1===o.beforeClose(e)||(e.classList.remove(o.openClass),e.classList.remove(o.openingClass),e.classList.add(o.closingClass),L.setStyle(e,L.mergeObjects(o.style||{},o.closingStyle||{})),t=null,o.takeover&&(e.removeAttribute("data-minitaur-taking-over"),(t=document.querySelector('[data-minitaur-backdrop="#'+e.id+'"]'))&&(t.classList.remove(o.openClass),t.classList.remove(o.openingClass),t.classList.add(o.closingClass),n=-1*parseInt(document.body.style.left||"0"),i=-1*parseInt(document.body.style.top||"0"),L.setStyle(t,o.backdropClosingStyle||{}),L.setStyle(document.body,{position:"relative",left:null,top:null,height:null,width:null}),window.scrollTo(n,i))),e.minitaur.closeDurationTimer=setTimeout(function(){e.minitaur.isOpen=!1,e.classList.remove(o.closingClass),e.classList.add(o.closeClass),o.takeover&&t&&(document.body.removeChild(t),window.addEventListener("scroll",L.documentScroll)),L.setStyle(e,L.mergeObjects(o.style||{},o.closeStyle||{})),e.dispatchEvent(new Event("close",{bubbles:!0})),o.afterClose&&o.afterClose(e)},o.closeDuration||0))}(e[t])},L.documentClick=function(e){for(var t=e.target,n=!0;t!==document.body&&((t.minitaur||t.minitaurIgnore||t.classList.contains("minitaur-ignore"))&&(n=!1),t=t.parentNode););if(n)for(var i=L.getModals("[data-minitaur]",!0),o=0;o<i.length;o++){var r=i[o];r.minitaur.closeOnFocusOut&&!0===r.minitaur.isOpen&&r.minitaur.close()}},L.documentResize=function(e){L.clearTimers(),L.resizeTimer=setTimeout(function(){for(var e,t=L.getModals("[data-minitaur]",!0),n=0;n<t.length;n++)(e=t[n]).minitaur.isOpen&&e.minitaur.open()},60)},L.documentScroll=function(e){L.clearTimers(),L.resizeTimer=setTimeout(function(){for(var e,t,n=L.getModals("[data-minitaur]",!0),i=0;i<n.length;i++)e=n[i],t=void 0,!(t=e.minitaur).isOpen||t.takeover||"viewport"!==t.anchor.x&&"viewport"!==t.anchor.y||e.minitaur.open()},60)},L.get=function(e,o,t){e=L.getModals(e,t);for(var r=[],n=0;n<e.length;n++)!function(e){var t=L.mergeObjects(e.minitaur,{element:e});if(o&&t.breakpoints){var n,i=null;for(n in t.breakpoints)document.documentElement.clientWidth>=parseInt(n)&&(i=t.breakpoints[n]);delete(t=i?L.mergeObjects(t,i):t).breakpoints}r.push(t)}(e[n]);return!!r.length&&(1===r.length?r[0]:r)},L.getModals=function(i,e){if("string"==typeof i?i=document.querySelectorAll(i):i instanceof HTMLElement&&(i=[i]),e){e=function(){for(var e,t=[],n=0;n<i.length;n++)(e=i[n]).minitaur?t.push(e):console.warn("Element doesn't appear to be a minitaur instance:",e);return{v:t}}();if("object"===o(e))return e.v}return i},L.initiateTriggers=function(m){m=L.getModals(m,!0);for(var g=["close","open","toggle"],e=function(e){var r=m[e],t=L.get(r,!0,!1).triggers;t=(t="string"==typeof t?[{action:"toggle",elements:t,events:["click"]}]:t||[]).reduce(function(e,t){if(Array.isArray(t))t.elements=t;else if(!t.elements)return console.warn("(minitaur: #"+r.id+") A trigger is missing it's elements option.",t),e;return e.push(t),e},[]);for(var n=0;n<t.length;n++){var i=t[n];"string"==typeof(i="string"==typeof i?{action:"toggle",elements:i,events:["click"]}:i).elements?i.elements=document.querySelectorAll(i.elements):i.elements instanceof HTMLElement&&(i.elements=[i.elements]),i.events?"string"==typeof i.events&&(i.events=[i.events]):i.events=["click"],i.action&&g.includes(i.action)||(i.action="toggle");for(var o=0;o<i.elements.length;o++){var a=i.elements[o],s=a.getAttribute("data-minitaur-"+i.action),l=a.getAttribute("data-minitaur-event");if(s?(s=s.split(",")).includes("#"+r.id)||(s.push("#"+r.id),a.setAttribute("data-minitaur-"+i.action,s.join(","))):a.setAttribute("data-minitaur-"+i.action,"#"+r.id),l){for(var l=l.split(","),c=0;c<i.events.length;c++){var u=i.events[c];l.includes(u)||l.push(u)}a.setAttribute("data-minitaur-event",l.join(","))}else a.setAttribute("data-minitaur-event",i.events.join(","))}}for(var d=function(e){for(var o=g[e],t=document.querySelectorAll("[data-minitaur-"+o+'="#'+r.id+'"], #'+r.id+" [data-minitaur-"+o+'=""]'),n=0;n<t.length;n++)!function(e){var t=e.getAttribute("data-minitaur-event");""===e.getAttribute("data-minitaur-"+o)&&e.setAttribute("data-minitaur-"+o,"#"+r.id),t?t=t.split(","):(t=["click"],e.setAttribute("data-minitaur-event","click"));for(var n=0;n<t.length;n++){var i=t[n];e.addEventListener(i,L.triggerEvent)}e.minitaurIgnore=!0,e.setAttribute("data-minitaur-trigger","")}(t[n])},p=0;p<g.length;p++)d(p)},t=0;t<m.length;t++)e(t)},L.kill=function(e,d){e=L.getModals(e,!0);for(var p=["close","open","toggle"],m=document.querySelectorAll("[data-minitaur-trigger]"),t=0;t<e.length;t++)!function(e){var t=L.get(e,!0,!1);t.isOpen&&t.close(),document.body.removeChild(e),!1!==d&&t.originalElement&&t.originalElementParent&&t.originalElementIndex&&t.originalElementParent.insertBefore(t.originalElement,t.originalElementParent.childNodes[t.originalElementIndex-1]);for(var n=0;n<m.length;n++){for(var i=m[n],o=0,r=0;r<p.length;r++){var a,s=p[r],l=i.getAttribute("data-minitaur-"+s);l?-1!==(a=(l=l.split(",")).indexOf("#"+e.id))&&(l.splice(a,1),l.length?i.setAttribute("data-minitaur-"+s,l.join(",")):(i.removeAttribute("data-minitaur-"+s),o++)):o++}if(o===p.length){var c=i.getAttribute("data-minitaur-event");i.removeAttribute("data-minitaur-event"),i.removeAttribute("data-minitaur-trigger");for(var u=0;u<c.length;u++)i.removeEventListener(c[u],L.triggerEvent);delete i.minitaurIgnore}}L.modalCount--}(e[t]);L.modalCount||(document.removeEventListener("click",L.documentClick),window.removeEventListener("resize",L.documentResize),window.removeEventListener("scroll",L.documentScroll),L.initiated=!1)},L.mergeObjects=function(){for(var r=function(e){return e&&"object"===o(e)&&!(e instanceof HTMLElement)},e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(i,o){return Object.keys(o).forEach(function(e){var t=i[e],n=o[e];Array.isArray(t)&&Array.isArray(n)?i[e]=[].concat(a(t),a(n)).filter(function(e,t,n){return n.indexOf(e)===t}):r(t)&&r(n)?i[e]=L.mergeObjects(t,n):i[e]=n}),i},{})},L.open=function(e,o){e=L.getModals(e,!0);for(var t=0;t<e.length;t++)!function(e){o&&e.minitaur.set(o);var t=L.get(e,!0,!1);if(E&&console.log("minitaur.open (#"+e.id+"):",t),L.clearTimers(e),!t.beforeOpen||!1!==t.beforeOpen(e)){if(t.content&&("function"==typeof t.content&&(t.content=t.content(e)),e.innerHTML!==t.content&&(e.innerHTML=t.content)),t.parameters)for(var n in t.parameters)e.innerHTML=e.innerHTML.replace(new RegExp("{"+n+"}","g"),t.parameters[n]);e.classList.remove(t.closeClass),e.classList.remove(t.closingClass),e.classList.add(t.openingClass),L.setStyle(e,L.mergeObjects(t.style||{},t.openingStyle||{}));var i=null;t.takeover&&!document.querySelector("#"+e.id+"-backdrop")?(window.removeEventListener("scroll",L.documentScroll),L.close("[data-minitaur][data-minitaur-taking-over]"),(i=document.createElement("div")).id=e.id+"-backdrop",e.setAttribute("data-minitaur-taking-over",""),i.setAttribute("data-minitaur-backdrop","#"+e.id),i.classList.add(t.backdropClass),i.classList.add(t.openingClass),L.setStyle(i,L.mergeObjects({position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",zIndex:99998},t.backdropOpeningStyle||{})),L.setStyle(document.body,{position:"fixed",left:"-"+window.scrollX+"px",top:"-"+window.scrollY+"px",height:document.body.clientHeight+"px",width:document.body.clientWidth+"px"}),document.body.insertBefore(i,e)):L.setStyle(document.body,{position:"relative"}),e.minitaur.openDurationTimer=setTimeout(function(){e.minitaur.isOpen=!0,e.classList.remove(t.openingClass),e.classList.add(t.openClass),t.takeover&&i&&(i.classList.remove(t.openingClass),i.classList.add(t.openClass),L.setStyle(i,t.backdropStyle||{})),L.setDimensions(e,t),L.initiateTriggers(e),e.dispatchEvent(new Event("open",{bubbles:!0})),t.afterOpen&&t.afterOpen(e)},t.openDuration||0)}}(e[t])},L.parseAttributes=function(e){var t,n={},i="minitaur",o=["class"],r=["anchor","backdropStyle","breakpoints","closeStyle","openStyle","parameters","position","respectAnchorSpacing","style"],a=["breakpoints"],s=Object.keys(L.defaultOptions).concat(["triggerElement"]);for(t in e)if(t!==i&&t.substring(0,i.length).toLowerCase()===i.toLowerCase()){var l=t.charAt(i.length).toLowerCase()+t.substring(i.length+1).replace("-",""),c=!1,u=e[t];"true"!==u.toLowerCase()&&u.length?"false"===u.toLowerCase()&&(u=!1):u=!0,o.includes(l)&&(u=u.split(","));for(var d=0;d<r.length;d++){var p=r[d],m=l.substring(0,p.length);if(m.length!==l.length&&m.toLowerCase()===p.toLowerCase()){var g=l.substring(p.length).toLowerCase();n[p]||(n[p]={}),a.includes(m)?(m=g.match(/^\d+/))?n[p][m[0]]=L.parseAttributes(f({},i+g.substring(m[0].length),u)):n[p]=L.parseAttributes(f({},i+g,u)):n[p][g]=u,c=!0;break}}!c&&s.includes(l)&&(n[l]=u)}return n},L.parseOptions=function(e){return e.takeover&&(e.anchor="viewport"),e.anchor&&"string"!=typeof e.anchor||(e.anchor={x:e.anchor,y:e.anchor}),e.position&&"string"!=typeof e.position||(e.position=e.position?e.position.split(" "):["middle"],e.position={x:e.position[1]||"middle",y:e.position[0]}),e.position.x||(e.position.x="middle"),e.position.y||(e.position.y="middle"),e.respectAnchorSpacing&&"boolean"!=typeof e.respectAnchorSpacing||(e.respectAnchorSpacing={x:e.respectAnchorSpacing,y:e.respectAnchorSpacing}),e.respectAnchorSpacing.x||(e.respectAnchorSpacing.x=!1),e.respectAnchorSpacing.y||(e.respectAnchorSpacing.y=!1),e},L.set=function(e,t,n){e=L.getModals(e,!0),"string"==typeof t&&(t=f({},t,n));for(var i,o=0;o<e.length;o++)i=e[o],E&&console.log("minitaur.set (#"+i.id+"):",t),i.minitaur=L.parseOptions(L.mergeObjects(i.minitaur,t||{}))},L.setDimensions=function(e,t,n){var i=L.get(e,!0,!1);(i=L.mergeObjects(i,t||{})).anchor.x||(i.anchor.x=i.triggerElement||document.body),i.anchor.y||(i.anchor.y=i.triggerElement||document.body);var o=null,r=null,o="string"==typeof i.anchor.x?"viewport"===i.anchor.x?document.body:document.querySelector(i.anchor.x):i.anchor.x,r="string"==typeof i.anchor.y?"viewport"===i.anchor.y?document.body:document.querySelector(i.anchor.y):i.anchor.y;o instanceof HTMLElement||(console.warn("(minitaur: #"+e.id+") Unable to find anchor.x:",o),o=document.body),r instanceof HTMLElement||(console.warn("(minitaur: #"+e.id+") Unable to find anchor.y:",r),r=document.body);var a=e.cloneNode(!0);L.setStyle(a,L.mergeObjects(i.style||{},i.openStyle||{},{left:"0px",opacity:"0",position:"absolute",top:"0px",transition:"none"})),document.body.appendChild(a);var s=getComputedStyle(a),l=o.getBoundingClientRect(),c=l.x+window.scrollX,u=l.y+window.scrollY,d=l.width,p=l.height,m=r.getBoundingClientRect(),g=m.x+window.scrollX,f=m.y+window.scrollY,y=m.width,b=m.height,h=parseFloat(s.getPropertyValue("margin-left")),v=parseFloat(s.getPropertyValue("margin-top")),w=parseFloat(s.getPropertyValue("margin-right")),t=parseFloat(s.getPropertyValue("margin-bottom")),S=a.offsetWidth+h+w,k=a.offsetHeight+v+t,x=0,A=0,h=parseFloat(s.getPropertyValue("width")),w=parseFloat(s.getPropertyValue("height")),v=document.body.clientWidth,t=document.body.clientHeight,s=!1;if(document.body.removeChild(a),"viewport"===i.anchor.x&&(c=window.scrollX,u=window.scrollY,d=window.innerWidth,p=window.innerHeight,v=d+window.scrollX),"viewport"===i.anchor.y&&(g=window.scrollX,f=window.scrollY,y=window.innerWidth,t=(b=window.innerHeight)+window.scrollY),i.takeover&&(c=0-parseInt(document.body.style.left||"0"),u=0-parseInt(document.body.style.top||"0"),g=0-parseInt(document.body.style.left||"0"),f=0-parseInt(document.body.style.top||"0"),v=c+window.innerWidth,t=f+window.innerHeight),o===document.body)switch(i.position.x){case"left":i.position.x="inner-left";break;case"right":i.position.x="inner-right"}if(r===document.body)switch(i.position.y){case"top":i.position.y="inner-top";break;case"bottom":i.position.y="inner-bottom"}if(i.respectAnchorSpacing.x){var C=getComputedStyle(o);switch(i.position.x){case"inner-left":c+=parseFloat(C.getPropertyValue("padding-left"));break;case"left":c-=parseFloat(C.getPropertyValue("margin-left"));break;case"inner-right":d-=parseFloat(C.getPropertyValue("padding-right"));break;case"right":d+=parseFloat(C.getPropertyValue("margin-right"))}}if(i.respectAnchorSpacing.y){var O=getComputedStyle(r);switch(i.position.y){case"inner-top":f+=parseFloat(O.getPropertyValue("padding-top"));break;case"top":f-=parseFloat(O.getPropertyValue("margin-top"));break;case"inner-bottom":b-=parseFloat(O.getPropertyValue("padding-bottom"));break;case"bottom":p+=parseFloat(O.getPropertyValue("margin-bottom"))}}switch(E&&console.log("minitaur.setDimensions (#"+e.id+"):",{anxhorX:{element:o,left:c,top:u,width:d,height:p,rect:l,boundary:v},anxhorY:{element:r,left:g,top:f,width:y,height:b,rect:m,boundary:t},modal:{height:k,width:S},scroll:{x:window.scrollX,y:window.scrollY}}),i.position.x){case"inner-left":x=c;break;case"left":x=c-S-1;break;case"middle":x=c+d/2-S/2;break;case"inner-right":x=c+d-S;break;case"right":x=c+d+1;break;default:if("string"==typeof i.position.x)x="%"===i.position.x[i.position.x.length-1]?c+i.position.x.substr(0,i.position.x.length-1)/100*d:c+parseInt(i.position.x);else{if(!Number.isFinite(i.position.x))return console.warn("minitaur (#"+e.id+") Invalid position.x value:",i.position.x),!1;x=c+i.position.x}}switch(i.position.y){case"inner-top":A=f;break;case"top":A=f-k-1;break;case"middle":A=f+b/2-k/2;break;case"inner-bottom":A=f+b-k;break;case"bottom":A=f+b+1;break;default:if("string"==typeof i.position.y)A="%"===i.position.y[i.position.y.length-1]?f+i.position.y.substr(0,i.position.y.length-1)/100*b:f+parseInt(i.position.y);else{if(!Number.isFinite(i.position.y))return console.warn("minitaur (#"+e.id+") Invalid position.y value:",i.position.y),!1;A=f+i.position.y}}if(i.stayInBounds&&((x=v<=x+S?v-S:x)<0&&(x=0),t<=A+k&&(A=t-k,s=!0),A<0&&(s=!(A=0)),"left"===i.position.x||"right"===i.position.x||"top"===i.position.y||"bottom"===i.position.y)){v=!1,t=!1;if(o!==document.body&&(v=(c<=x&&x<c+d||x<c&&c<=x+S)&&(u<=A&&A<u+p||A<u&&u<=A+k)),r!==document.body&&(t=(g<=x&&x<g+y||x<g&&g<=x+S)&&(f<=A&&A<f+b||A<f&&f<=A+k)),v||t)if(s){if("top"!==i.position.y)return i.position.y="top",L.setDimensions(e,i,!0);if(!n)return i.position.y="bottom",L.setDimensions(e,i,!0)}else{if("left"!==i.position.x)return i.position.x="left",L.setDimensions(e,i,!0);if(!n)return i.position.x="right",L.setDimensions(e,i,!0)}}return L.setStyle(e,L.mergeObjects({zIndex:i.takeover?99999:null},i.style||{},i.openStyle||{},{position:"absolute",left:x+"px",top:A+"px",width:h+"px",height:w+"px"})),!0},L.setStyle=function(e,t){for(var n in E&&console.log("minitaur.setStyle ("+(e.id?"#"+e.id:e.tagName)+"):",t),t)e.style[n]=t[n]},L.toggle=function(e,t){e=L.getModals(e,!0);for(var n,i=0;i<e.length;i++)n=e[i],E&&console.log("minitaur.toggle (#"+n.id+"):",t),n.minitaur.isOpen?n.minitaur.close(t):n.minitaur.open(t)},L.triggerEvent=function(e){for(var t=["close","open","toggle"],n=e.currentTarget,i=L.mergeObjects(L.parseAttributes(n.dataset),{triggerElement:n}),o=0;o<t.length;o++){var r=t[o],a=n.getAttribute("data-minitaur-"+r);a&&(E&&console.log("minitaur.triggerEvent:",a,i),L[r](a,i))}},L});
//# sourceMappingURL=minitaur.min.js.map