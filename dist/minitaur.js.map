{"version":3,"file":"minitaur.js","sources":["../src/minitaur.js"],"sourcesContent":["/*!\n  minitaur v0.3.0 (https://minitaur.js.org)\n  by Kodie Grantham (https://kodieg.com)\n*/\n\nconst minitaur = (mount, options) => {\n  let elements = []\n  let modals = []\n\n  if (mount && mount.constructor === Object) {\n    options = mount\n    mount = null\n  }\n\n  options = minitaur.mergeObjects(minitaur.defaultOptions, options || {})\n\n  if (!mount) mount = options.mount\n\n  if (typeof mount === 'string') {\n    elements = document.querySelectorAll(mount)\n  } else if (mount instanceof HTMLElement) {\n    elements = [mount]\n  } else if (!mount) {\n    if (options.id) {\n      elements = [document.getElementById(options.id) || document.createElement('div')]\n    } else {\n      elements = [document.createElement('div')]\n    }\n  }\n\n  elements = minitaur.getModals(elements)\n\n  if (elements && elements.length) {\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        if (modal.minitaur) {\n          return true\n        }\n\n        if (options.beforeInit && options.beforeInit(modal) === false) {\n          return false\n        }\n\n        minitaur.modalCount++\n\n        let funcs = {\n          close: function (options) {\n            return minitaur.close(modal, options)\n          },\n          get: function (parseBreakpoints) {\n            return minitaur.get(modal, parseBreakpoints, false)\n          },\n          kill: function (putBack) {\n            return minitaur.kill(modal, putBack)\n          },\n          open: function (options) {\n            return minitaur.open(modal, options)\n          },\n          set: function (options, value) {\n            return minitaur.set(modal, options, value)\n          },\n          toggle: function (options) {\n            return minitaur.toggle(modal, options)\n          }\n        }\n\n        let opts = minitaur.parseOptions(minitaur.mergeObjects(options, minitaur.parseAttributes(modal.dataset), funcs, {\n          isOpen: false\n        }))\n\n        if (modal.parentNode && modal.parentNode !== document.body) {\n          opts.originalElement = modal.cloneNode(true)\n          opts.originalElementIndex = Array.prototype.indexOf.call(modal.parentNode.childNodes, modal)\n          opts.originalElementParent = modal.parentNode\n          modal.parentNode.removeChild(modal)\n        }\n\n        modal.minitaur = opts\n        modal.setAttribute('data-minitaur', '')\n\n        opts = minitaur.get(modal, true, false)\n\n        if (opts.id) {\n          modal.id = opts.id\n        } else if (!modal.id) {\n          modal.id = 'minitaur-' + minitaur.modalCount\n        }\n\n        if (window.minitaurDebug) console.log('minitaur.init (#' + modal.id + '):', opts)\n\n        if (opts.class) {\n          if (typeof opts.class === 'string') {\n            opts.class = [opts.class]\n          }\n\n          for (let c = 0; c < opts.class.length; c++) {\n            modal.classList.add(opts.class[c])\n          }\n        }\n\n        minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.closeStyle || {}))\n        minitaur.initializeTriggers(modal)\n\n        if (!modal.parentNode) {\n          document.body.appendChild(modal)\n        }\n\n        if (opts.opened) {\n          modal.minitaur.open()\n        } else {\n          modal.minitaur.close()\n        }\n\n        if (opts.afterInit) {\n          options.afterInit(modal)\n        }\n\n        modals.push(modal)\n      })(elements[i])\n    }\n  }\n\n  if (!minitaur.initialized) {\n    minitaur.initialized = true\n\n    document.addEventListener('click', minitaur.documentClick)\n    window.addEventListener('resize', minitaur.documentResize)\n    window.addEventListener('scroll', minitaur.documentScroll)\n  }\n\n  if (modals.length) {\n    if (modals.length === 1) {\n      return modals[0]\n    }\n\n    return modals\n  }\n\n  return false\n}\n\nminitaur.initialized = false\nminitaur.modalCount = 0\nminitaur.scrollX = 0\nminitaur.scrollY = 0\nminitaur.templates = {}\n\nminitaur.defaultOptions = {\n  afterClose: null,\n  afterInit: null,\n  afterOpen: null,\n  anchor: null,\n  backdropClass: 'minitaur-backdrop',\n  backdropClosingStyle: null,\n  backdropOpeningStyle: null,\n  backdropStyle: {\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  beforeClose: null,\n  beforeInit: null,\n  beforeOpen: null,\n  breakpoints: null,\n  class: 'minitaur',\n  closeClass: 'closed',\n  closeDuration: 0,\n  closingClass: 'closing',\n  closingStyle: null,\n  closeOnFocusOut: true,\n  closeStyle: {\n    display: 'none',\n    visibility: 'hidden'\n  },\n  content: null,\n  id: null,\n  mount: '.minitaur, [data-minitaur]',\n  opened: false,\n  openClass: 'opened',\n  openDuration: 0,\n  openingClass: 'opening',\n  openingStyle: {\n    display: 'block',\n    visibility: 'visible'\n  },\n  openStyle: null,\n  overrides: null,\n  parameters: null,\n  position: 'middle',\n  respectAnchorSpacing: false,\n  saveOptions: true,\n  saveParameters: true,\n  stayInBounds: true,\n  style: null,\n  takeover: false,\n  template: null,\n  triggers: []\n}\n\nminitaur.clearTimers = function (modal) {\n  if (minitaur.resizeTimer) {\n    clearTimeout(minitaur.resizeTimer)\n    minitaur.resizeTimer = null\n  }\n\n  if (modal) {\n    if (modal.minitaur.closeDurationTimer) {\n      clearTimeout(modal.minitaur.closeDurationTimer)\n      modal.minitaur.closeDurationTimer = null\n    }\n\n    if (modal.minitaur.openDurationTimer) {\n      clearTimeout(modal.minitaur.openDurationTimer)\n      modal.minitaur.openDurationTimer = null\n    }\n  }\n}\n\nminitaur.close = (modals, options) => {\n  modals = minitaur.getModals(modals, true)\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      const opts = minitaur.parseOptions(minitaur.mergeObjects(minitaur.get(modal, true, false), modal.minitaurTempOpts || {}, options || {}))\n\n      if (options && opts.saveOptions) {\n        modal.minitaur.set(Object.assign({}, options, {\n          parameters: options.parameters && opts.saveParameters ? options.parameters : {}\n        }))\n      }\n\n      delete modal.minitaurTempOpts\n\n      if (window.minitaurDebug) console.log('minitaur.close (#' + modal.id + '):', opts)\n\n      minitaur.clearTimers(modal)\n\n      if (opts.beforeClose && opts.beforeClose(modal, opts) === false) {\n        return false\n      }\n\n      modal.classList.remove(opts.openClass)\n      modal.classList.remove(opts.openingClass)\n      modal.classList.add(opts.closingClass)\n      minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.closingStyle || {}))\n\n      let backdrop = null\n\n      if (opts.takeover) {\n        modal.removeAttribute('data-minitaur-taking-over')\n\n        backdrop = document.querySelector('[data-minitaur-backdrop=\"#' + modal.id + '\"]')\n\n        if (backdrop) {\n          backdrop.classList.remove(opts.openClass)\n          backdrop.classList.remove(opts.openingClass)\n          backdrop.classList.add(opts.closingClass)\n\n          const scrollX = parseInt(document.body.style.left || '0') * -1\n          const scrollY = parseInt(document.body.style.top || '0') * -1\n\n          minitaur.setStyle(backdrop, opts.backdropClosingStyle || {})\n\n          minitaur.setStyle(document.body, {\n            'overscroll-behavior': null\n          })\n\n          window.scrollTo(scrollX, scrollY)\n        }\n      }\n\n      modal.minitaur.closeDurationTimer = setTimeout(function () {\n        modal.minitaur.isOpen = false\n\n        modal.classList.remove(opts.closingClass)\n        modal.classList.add(opts.closeClass)\n\n        if (opts.takeover && backdrop) {\n          document.body.removeChild(backdrop)\n          window.addEventListener('scroll', minitaur.documentScroll)\n          window.removeEventListener('scroll', minitaur.documentPreventScroll)\n        }\n\n        minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.closeStyle || {}))\n\n        modal.dispatchEvent(new Event('close', { bubbles: true }))\n\n        if (opts.afterClose) {\n          opts.afterClose(modal, opts)\n        }\n      }, opts.closeDuration || 0)\n    })(modals[i])\n  }\n}\n\nminitaur.documentClick = (e) => {\n  let element = e.target\n  let closeModals = true\n\n  do {\n    if (element === document.body) break\n    if (\n      element.minitaur ||\n      element.minitaurIgnore ||\n      element.classList.contains('minitaur-ignore')\n    ) closeModals = false\n  } while ((element = element.parentNode))\n\n  if (closeModals) {\n    const modals = minitaur.getModals('[data-minitaur]', true)\n\n    for (let i = 0; i < modals.length; i++) {\n      let modal = modals[i]\n\n      if (modal.minitaur.closeOnFocusOut && modal.minitaur.isOpen === true) {\n        modal.minitaur.close()\n      }\n    }\n  }\n}\n\nminitaur.documentResize = (e) => {\n  minitaur.clearTimers()\n\n  setTimeout(function () {\n    const disableAnimations = document.createElement('style')\n    disableAnimations.type = 'text/css'\n    disableAnimations.innerHTML = '* { transition: none !important; }'\n    document.getElementsByTagName('head')[0].appendChild(disableAnimations)\n\n    minitaur.resizeTimer = setTimeout(function () {\n      const elements = minitaur.getModals('[data-minitaur]', true)\n\n      for (let i = 0; i < elements.length; i++) {\n        (function (modal) {\n          const opts = modal.minitaur\n\n          if (opts.isOpen) {\n            minitaur.setDimensions(modal)\n\n            if (opts.takeover) {\n              window.scrollTo(minitaur.scrollX, minitaur.scrollY)\n            }\n          }\n        })(elements[i])\n      }\n\n      disableAnimations.remove()\n\n      if (e) {\n        minitaur.documentResize()\n      }\n    }, 60)\n  }, 1)\n}\n\nminitaur.documentScroll = (e) => {\n  minitaur.clearTimers()\n\n  setTimeout(function () {\n    minitaur.resizeTimer = setTimeout(function () {\n      const elements = minitaur.getModals('[data-minitaur]', true)\n\n      for (let i = 0; i < elements.length; i++) {\n        (function (modal) {\n          const opts = modal.minitaur\n\n          if (opts.isOpen && !opts.takeover && (opts.anchor.x === 'viewport' || opts.anchor.y === 'viewport')) {\n            minitaur.setDimensions(modal)\n          }\n        })(elements[i])\n      }\n    }, 60)\n  }, 1)\n}\n\nminitaur.documentPreventScroll = (e) => {\n  window.scrollTo(minitaur.scrollX, minitaur.scrollY)\n}\n\nminitaur.get = (elements, parseBreakpoints, verify) => {\n  elements = minitaur.getModals(elements, verify)\n\n  let modals = []\n\n  for (let i = 0; i < elements.length; i++) {\n    (function (modal) {\n      let opts = minitaur.mergeObjects(modal.minitaur, { element: modal })\n\n      if (opts.overrides) {\n        for (let selector in opts.overrides) {\n          if (modal.matches(selector)) {\n            opts = minitaur.mergeObjects(opts, opts.overrides[selector])\n          }\n        }\n\n        delete opts.overrides\n      }\n\n      if (parseBreakpoints && opts.breakpoints) {\n        let breakpointOpts = null\n\n        for (let breakpoint in opts.breakpoints) {\n          if (document.documentElement.clientWidth >= parseInt(breakpoint)) {\n            breakpointOpts = opts.breakpoints[breakpoint]\n          }\n        }\n\n        if (breakpointOpts) {\n          opts = minitaur.mergeObjects(opts, breakpointOpts)\n        }\n\n        delete opts.breakpoints\n      }\n\n      modals.push(opts)\n    })(elements[i])\n  }\n\n  if (modals.length) {\n    if (modals.length === 1) {\n      return modals[0]\n    }\n\n    return modals\n  }\n\n  return false\n}\n\nminitaur.getModals = (elements, verify) => {\n  if (typeof elements === 'string') {\n    elements = document.querySelectorAll(elements)\n  } else if (elements instanceof HTMLElement) {\n    elements = [elements]\n  }\n\n  if (verify) {\n    let verifiedElements = []\n\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        if (!modal.minitaur) {\n          console.warn('Element doesn\\'t appear to be a minitaur instance:', modal)\n          return\n        }\n\n        verifiedElements.push(modal)\n      })(elements[i])\n    }\n\n    return verifiedElements\n  }\n\n  return elements\n}\n\nminitaur.initializeTriggers = (modals) => {\n  modals = minitaur.getModals(modals, true)\n\n  let actions = ['close', 'open', 'toggle']\n\n  for (let i = 0; i < modals.length; i++) {\n    const modal = modals[i]\n    let opts = minitaur.get(modal, true, false)\n    let triggers = opts.triggers || opts.trigger\n\n    if (typeof triggers === 'string') {\n      triggers = [{\n        action: 'toggle',\n        elements: triggers,\n        events: ['click']\n      }]\n    } else if (!triggers) {\n      triggers = []\n    }\n\n    triggers = triggers.reduce((validTriggers, trigger) => {\n      if (Array.isArray(trigger)) {\n        trigger.elements = trigger\n      } else if (!trigger.elements) {\n        console.warn('(minitaur: #' + modal.id + ') A trigger is missing it\\'s elements option.', trigger)\n        return validTriggers\n      }\n\n      validTriggers.push(trigger)\n      return validTriggers\n    }, [])\n\n    for (let t = 0; t < triggers.length; t++) {\n      let trigger = triggers[t]\n\n      if (typeof trigger === 'string') {\n        trigger = {\n          action: 'toggle',\n          elements: trigger,\n          events: ['click']\n        }\n      }\n\n      if (typeof trigger.elements === 'string') {\n        trigger.elements = document.querySelectorAll(trigger.elements)\n      } else if (trigger.elements instanceof HTMLElement) {\n        trigger.elements = [trigger.elements]\n      }\n\n      if (!trigger.events) {\n        trigger.events = ['click']\n      } else if (typeof trigger.events === 'string') {\n        trigger.events = [trigger.events]\n      }\n\n      if (!trigger.action || !actions.includes(trigger.action)) {\n        trigger.action = 'toggle'\n      }\n\n      for (let e = 0; e < trigger.elements.length; e++) {\n        const triggerElement = trigger.elements[e]\n        let triggerElementTargets = triggerElement.getAttribute('data-minitaur-' + trigger.action)\n        let triggerElementEvents = triggerElement.getAttribute('data-minitaur-event')\n\n        if (triggerElementTargets) {\n          triggerElementTargets = triggerElementTargets.split(',')\n\n          if (!triggerElementTargets.includes('#' + modal.id)) {\n            triggerElementTargets.push('#' + modal.id)\n            triggerElement.setAttribute('data-minitaur-' + trigger.action, triggerElementTargets.join(','))\n          }\n        } else {\n          triggerElement.setAttribute('data-minitaur-' + trigger.action, '#' + modal.id)\n        }\n\n        if (triggerElementEvents) {\n          triggerElementEvents = triggerElementEvents.split(',')\n\n          for (let te = 0; te < trigger.events.length; te++) {\n            const triggerEvent = trigger.events[te]\n\n            if (!triggerElementEvents.includes(triggerEvent)) {\n              triggerElementEvents.push(triggerEvent)\n            }\n          }\n\n          triggerElement.setAttribute('data-minitaur-event', triggerElementEvents.join(','))\n        } else {\n          triggerElement.setAttribute('data-minitaur-event', trigger.events.join(','))\n        }\n      }\n    }\n\n    for (let a = 0; a < actions.length; a++) {\n      const action = actions[a]\n      const triggerElements = document.querySelectorAll('[data-minitaur-' + action + '=\"#' + modal.id + '\"], #' + modal.id + ' [data-minitaur-' + action + '=\"\"]')\n\n      for (let ae = 0; ae < triggerElements.length; ae++) {\n        (function (triggerElement) {\n          let triggerEvents = triggerElement.getAttribute('data-minitaur-event')\n          let triggerTargets = triggerElement.getAttribute('data-minitaur-' + action)\n\n          if (triggerTargets === '') {\n            triggerElement.setAttribute('data-minitaur-' + action, '#' + modal.id)\n          }\n\n          if (triggerEvents) {\n            triggerEvents = triggerEvents.split(',')\n          } else {\n            triggerEvents = ['click']\n            triggerElement.setAttribute('data-minitaur-event', 'click')\n          }\n\n          for (let aee = 0; aee < triggerEvents.length; aee++) {\n            let triggerEvent = triggerEvents[aee]\n            triggerElement.addEventListener(triggerEvent, minitaur.triggerEvent)\n          }\n\n          triggerElement.minitaurIgnore = true\n          triggerElement.setAttribute('data-minitaur-trigger', '')\n        })(triggerElements[ae])\n      }\n    }\n  }\n}\n\nminitaur.kill = (modals, putBack) => {\n  modals = minitaur.getModals(modals, true)\n\n  const actions = ['close', 'open', 'toggle']\n  const triggerElements = document.querySelectorAll('[data-minitaur-trigger]')\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      const opts = minitaur.get(modal, true, false)\n\n      if (opts.isOpen) opts.close()\n\n      document.body.removeChild(modal)\n\n      if (putBack !== false) {\n        if (opts.originalElement && opts.originalElementParent && opts.originalElementIndex) {\n          if (opts.originalElementIndex) {\n            if (opts.originalElementIndex > opts.originalElementParent.childNodes.length - 1) {\n              opts.originalElementParent.append(opts.originalElement)\n            } else {\n              opts.originalElementParent.insertBefore(\n                opts.originalElement,\n                opts.originalElementParent.childNodes[opts.originalElementIndex]\n              )\n            }\n          } else {\n            opts.originalElementParent.prepend(opts.originalElement)\n          }\n        }\n      }\n\n      for (let t = 0; t < triggerElements.length; t++) {\n        const triggerElement = triggerElements[t]\n        let nullActions = 0\n\n        for (let a = 0; a < actions.length; a++) {\n          const action = actions[a]\n          let triggerElementTargets = triggerElement.getAttribute('data-minitaur-' + action)\n\n          if (triggerElementTargets) {\n            triggerElementTargets = triggerElementTargets.split(',')\n\n            let triggerElementTargetIndex = triggerElementTargets.indexOf('#' + modal.id)\n\n            if (triggerElementTargetIndex !== -1) {\n              triggerElementTargets.splice(triggerElementTargetIndex, 1)\n\n              if (!triggerElementTargets.length) {\n                nullActions++\n              }\n            }\n          } else {\n            nullActions++\n          }\n        }\n\n        if (nullActions === actions.length) {\n          let triggerEvents = triggerElement.getAttribute('data-minitaur-event')\n          triggerEvents = triggerEvents ? triggerEvents.split(',') : []\n\n          triggerElement.removeAttribute('data-minitaur-event')\n          triggerElement.removeAttribute('data-minitaur-trigger')\n\n          for (let e = 0; e < triggerEvents.length; e++) {\n            triggerElement.removeEventListener(triggerEvents[e], minitaur.triggerEvent)\n          }\n\n          delete triggerElement.minitaurIgnore\n        }\n      }\n\n      minitaur.modalCount--\n    })(modals[i])\n  }\n\n  if (!minitaur.modalCount) {\n    document.removeEventListener('click', minitaur.documentClick)\n    window.removeEventListener('resize', minitaur.documentResize)\n    window.removeEventListener('scroll', minitaur.documentScroll)\n\n    minitaur.initialized = false\n  }\n}\n\nminitaur.mergeObjects = (...objects) => {\n  const isObject = function (obj) { return obj && typeof obj === 'object' && !(obj instanceof HTMLElement) }\n\n  return objects.reduce((prev, obj) => {\n    Object.keys(obj).forEach((key) => {\n      const pVal = prev[key]\n      const oVal = obj[key]\n\n      if (Array.isArray(pVal) && Array.isArray(oVal)) {\n        prev[key] = [...pVal, ...oVal].filter((element, index, array) => {\n          return array.indexOf(element) === index\n        })\n      } else if (isObject(pVal) && isObject(oVal)) {\n        prev[key] = minitaur.mergeObjects(pVal, oVal)\n      } else {\n        prev[key] = oVal\n      }\n    })\n\n    return prev\n  }, {})\n}\n\nminitaur.open = (modals, options) => {\n  modals = minitaur.getModals(modals, true)\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      const opts = minitaur.parseOptions(minitaur.mergeObjects(minitaur.get(modal, true, false), options || {}))\n\n      if (options && opts.saveOptions) {\n        modal.minitaur.set(Object.assign({}, options, {\n          parameters: options.parameters && opts.saveParameters ? options.parameters : {}\n        }))\n      }\n\n      modal.minitaurTempOpts = opts\n\n      if (window.minitaurDebug) console.log('minitaur.open (#' + modal.id + '):', opts)\n\n      minitaur.clearTimers(modal)\n\n      if (opts.beforeOpen && opts.beforeOpen(modal, opts) === false) {\n        return false\n      }\n\n      if (opts.content) {\n        if (typeof opts.content === 'function') {\n          opts.content = opts.content(modal)\n        }\n\n        if (modal.innerHTML !== opts.content) {\n          modal.innerHTML = opts.content\n        }\n      }\n\n      if (opts.template) {\n        const templateContentElement = modal.querySelector('.minitaur-content')\n        let templateContent = modal.innerHTML\n        let template = minitaur.templates[opts.template] || opts.template\n\n        if (templateContentElement) {\n          templateContent = templateContentElement.innerHTML\n        }\n\n        if (typeof template === 'function') {\n          template = template(modal)\n        }\n\n        const templateClone = document.createElement('div')\n        templateClone.innerHTML = template\n        const templateHasContentElement = !!templateClone.querySelector('.minitaur-content')\n        templateClone.remove()\n\n        if (!templateHasContentElement) {\n          templateContent = `<div class=\"minitaur-content\">${templateContent}</div>`\n        }\n\n        modal.classList.remove.apply(modal.classList, Array.from(modal.classList).filter(c => c.startsWith('minitaur-template-')))\n\n        if (minitaur.templates[opts.template]) {\n          modal.classList.add('minitaur-template-' + opts.template)\n        }\n\n        modal.innerHTML = template.replace('{minitaur-content}', templateContent)\n      }\n\n      if (opts.parameters) {\n        for (let parameter in opts.parameters) {\n          modal.innerHTML = modal.innerHTML.replace(\n            new RegExp('{' + parameter + '}', 'g'),\n            opts.parameters[parameter]\n          )\n        }\n      }\n\n      modal.classList.remove(opts.closeClass)\n      modal.classList.remove(opts.closingClass)\n      modal.classList.add(opts.openingClass)\n      minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.openingStyle || {}))\n\n      let backdrop = null\n\n      if (opts.takeover && !document.querySelector('#' + modal.id + '-backdrop')) {\n        minitaur.scrollX = window.scrollX\n        minitaur.scrollY = window.scrollY\n\n        window.addEventListener('scroll', minitaur.documentPreventScroll)\n        window.removeEventListener('scroll', minitaur.documentScroll)\n\n        minitaur.close('[data-minitaur][data-minitaur-taking-over]')\n\n        backdrop = document.createElement('div')\n\n        backdrop.id = modal.id + '-backdrop'\n\n        modal.setAttribute('data-minitaur-taking-over', '')\n        backdrop.setAttribute('data-minitaur-backdrop', '#' + modal.id)\n        backdrop.classList.add(opts.backdropClass)\n        backdrop.classList.add(opts.openingClass)\n\n        minitaur.setStyle(backdrop, minitaur.mergeObjects({\n          position: 'fixed',\n          left: '0px',\n          top: '0px',\n          right: '0px',\n          bottom: '0px',\n          zIndex: 99998\n        }, opts.backdropOpeningStyle || {}))\n\n        minitaur.setStyle(document.body, {\n          'overscroll-behavior': 'none'\n        })\n\n        document.body.insertBefore(backdrop, modal)\n      }\n\n      modal.minitaur.openDurationTimer = setTimeout(function () {\n        modal.minitaur.isOpen = true\n\n        modal.classList.remove(opts.openingClass)\n        modal.classList.add(opts.openClass)\n\n        if (opts.takeover && backdrop) {\n          backdrop.classList.remove(opts.openingClass)\n          backdrop.classList.add(opts.openClass)\n          minitaur.setStyle(backdrop, opts.backdropStyle || {})\n        }\n\n        minitaur.setDimensions(modal, opts)\n        minitaur.initializeTriggers(modal)\n\n        modal.dispatchEvent(new Event('open', { bubbles: true }))\n\n        if (opts.afterOpen) {\n          opts.afterOpen(modal, opts)\n        }\n      }, opts.openDuration || 0)\n    })(modals[i])\n  }\n}\n\nminitaur.parseAttributes = (data) => {\n  let opts = {}\n  const keyPrefix = 'minitaur'\n  const arrayParameters = ['class']\n  const objectParameters = ['anchor', 'backdropStyle', 'breakpoints', 'closeStyle', 'openStyle', 'parameters', 'position', 'respectAnchorSpacing', 'style']\n  const deepObjectParameters = ['breakpoints']\n  const validParameters = Object.keys(minitaur.defaultOptions).concat(['triggerElement'])\n\n  for (let key in data) {\n    if (key !== keyPrefix && key.substring(0, keyPrefix.length).toLowerCase() === keyPrefix.toLowerCase()) {\n      const property = key.charAt(keyPrefix.length).toLowerCase() + key.substring(keyPrefix.length + 1).replace('-', '')\n      let propSet = false\n      let value = data[key]\n\n      if (value.toLowerCase() === 'true' || !value.length) {\n        value = true\n      } else if (value.toLowerCase() === 'false') {\n        value = false\n      }\n\n      if (arrayParameters.includes(property)) {\n        value = value.split(',')\n      }\n\n      for (let o = 0; o < objectParameters.length; o++) {\n        const objKey = objectParameters[o]\n        const objProp = property.substring(0, objKey.length)\n\n        if (objProp.length !== property.length && objProp.toLowerCase() === objKey.toLowerCase()) {\n          let objPropKey = property.substring(objKey.length)\n          objPropKey = objPropKey[0].toLowerCase() + objPropKey.slice(1)\n\n          if (!opts[objKey]) {\n            opts[objKey] = {}\n          }\n\n          if (deepObjectParameters.includes(objProp)) {\n            let breakpoint = objPropKey.match(/^\\d+/)\n\n            if (breakpoint) {\n              opts[objKey][breakpoint[0]] = minitaur.parseAttributes({ [keyPrefix + objPropKey.substring(breakpoint[0].length)]: value })\n            } else {\n              opts[objKey] = minitaur.parseAttributes({ [keyPrefix + objPropKey]: value })\n            }\n          } else {\n            opts[objKey][objPropKey] = value\n          }\n\n          propSet = true\n          break\n        }\n      }\n\n      if (!propSet && validParameters.includes(property)) {\n        opts[property] = value\n      }\n    }\n  }\n\n  return opts\n}\n\nminitaur.parseOptions = (opts) => {\n  if (opts.takeover) opts.anchor = 'viewport'\n\n  if (!opts.anchor || typeof opts.anchor === 'string') {\n    opts.anchor = {\n      x: opts.anchor,\n      y: opts.anchor\n    }\n  }\n\n  if (!opts.position || typeof opts.position === 'string') {\n    opts.position = opts.position ? opts.position.split(' ') : ['middle']\n    opts.position = {\n      x: opts.position[1] || 'middle',\n      y: opts.position[0]\n    }\n  }\n\n  if (!opts.position.x) opts.position.x = 'middle'\n  if (!opts.position.y) opts.position.y = 'middle'\n\n  if (!opts.respectAnchorSpacing || typeof opts.respectAnchorSpacing === 'boolean') {\n    opts.respectAnchorSpacing = {\n      x: opts.respectAnchorSpacing,\n      y: opts.respectAnchorSpacing\n    }\n  }\n\n  if (!opts.respectAnchorSpacing.x) opts.respectAnchorSpacing.x = false\n  if (!opts.respectAnchorSpacing.y) opts.respectAnchorSpacing.y = false\n\n  return opts\n}\n\nminitaur.set = (modals, options, value) => {\n  modals = minitaur.getModals(modals, true)\n\n  if (typeof options === 'string') {\n    options = { [options]: value }\n  }\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      if (window.minitaurDebug) console.log('minitaur.set (#' + modal.id + '):', options)\n      modal.minitaur = minitaur.parseOptions(minitaur.mergeObjects(modal.minitaur, options || {}))\n    })(modals[i])\n  }\n}\n\nminitaur.setDimensions = (modal, options, final) => {\n  let opts = minitaur.get(modal, true, false)\n\n  opts = minitaur.mergeObjects(opts, options || {})\n\n  if (!opts.anchor.x) opts.anchor.x = opts.triggeredElement || document.body\n  if (!opts.anchor.y) opts.anchor.y = opts.triggeredElement || document.body\n\n  let anchorXElement = null\n  let anchorYElement = null\n\n  if (typeof opts.anchor.x === 'string') {\n    if (opts.anchor.x === 'viewport') {\n      anchorXElement = document.body\n    } else {\n      anchorXElement = document.querySelector(opts.anchor.x)\n    }\n  } else {\n    anchorXElement = opts.anchor.x\n  }\n\n  if (typeof opts.anchor.y === 'string') {\n    if (opts.anchor.y === 'viewport') {\n      anchorYElement = document.body\n    } else {\n      anchorYElement = document.querySelector(opts.anchor.y)\n    }\n  } else {\n    anchorYElement = opts.anchor.y\n  }\n\n  if (!(anchorXElement instanceof HTMLElement)) {\n    console.warn('(minitaur: #' + modal.id + ') Unable to find anchor.x:', anchorXElement)\n    anchorXElement = document.body\n  }\n\n  if (!(anchorYElement instanceof HTMLElement)) {\n    console.warn('(minitaur: #' + modal.id + ') Unable to find anchor.y:', anchorYElement)\n    anchorYElement = document.body\n  }\n\n  const modalClone = modal.cloneNode(true)\n\n  minitaur.setStyle(modalClone, minitaur.mergeObjects(opts.style || {}, opts.openStyle || {}, {\n    left: '0px',\n    opacity: '0',\n    position: 'absolute',\n    top: '0px',\n    transition: 'none'\n  }))\n\n  document.body.appendChild(modalClone)\n\n  const modalStyle = getComputedStyle(modalClone)\n  const anchorXRect = anchorXElement.getBoundingClientRect()\n  let anchorXLeft = anchorXRect.x + window.scrollX\n  let anchorXTop = anchorXRect.y + window.scrollY\n  let anchorXWidth = anchorXRect.width\n  let anchorXHeight = anchorXRect.height\n  let anchorYRect = anchorYElement.getBoundingClientRect()\n  let anchorYLeft = anchorYRect.x + window.scrollX\n  let anchorYTop = anchorYRect.y + window.scrollY\n  let anchorYWidth = anchorYRect.width\n  let anchorYHeight = anchorYRect.height\n  const modalMarginLeft = parseFloat(modalStyle.getPropertyValue('margin-left'))\n  const modalMarginTop = parseFloat(modalStyle.getPropertyValue('margin-top'))\n  const modalMarginRight = parseFloat(modalStyle.getPropertyValue('margin-right'))\n  const modalMarginBottom = parseFloat(modalStyle.getPropertyValue('margin-bottom'))\n  const modalWidth = modalClone.offsetWidth + modalMarginLeft + modalMarginRight\n  const modalHeight = modalClone.offsetHeight + modalMarginTop + modalMarginBottom\n  let left = 0\n  let top = 0\n  let width = parseFloat(modalClone.style.width || modalStyle.getPropertyValue('width'))\n  let height = parseFloat(modalClone.style.height || modalStyle.getPropertyValue('height'))\n  let boundaryX = document.body.clientWidth\n  let boundaryY = document.body.clientHeight\n  let adjustTopPositionFirst = false\n\n  document.body.removeChild(modalClone)\n\n  if (opts.anchor.x === 'viewport') {\n    anchorXLeft = window.scrollX\n    anchorXTop = window.scrollY\n    anchorXWidth = window.innerWidth\n    anchorXHeight = window.innerHeight\n    boundaryX = anchorXWidth + window.scrollX\n  }\n\n  if (opts.anchor.y === 'viewport') {\n    anchorYLeft = window.scrollX\n    anchorYTop = window.scrollY\n    anchorYWidth = window.innerWidth\n    anchorYHeight = window.innerHeight\n    boundaryY = anchorYHeight + window.scrollY\n  }\n\n  if (anchorXElement === document.body) {\n    switch (opts.position.x) {\n      case 'left':\n        opts.position.x = 'inner-left'\n        break\n      case 'right':\n        opts.position.x = 'inner-right'\n        break\n    }\n  }\n\n  if (anchorYElement === document.body) {\n    switch (opts.position.y) {\n      case 'top':\n        opts.position.y = 'inner-top'\n        break\n      case 'bottom':\n        opts.position.y = 'inner-bottom'\n        break\n    }\n  }\n\n  if (opts.respectAnchorSpacing.x) {\n    const anchorXStyle = getComputedStyle(anchorXElement)\n\n    switch (opts.position.x) {\n      case 'inner-left':\n        anchorXLeft += parseFloat(anchorXStyle.getPropertyValue('padding-left'))\n        break\n      case 'left':\n        anchorXLeft -= parseFloat(anchorXStyle.getPropertyValue('margin-left'))\n        break\n      case 'inner-right':\n        anchorXWidth -= parseFloat(anchorXStyle.getPropertyValue('padding-right'))\n        break\n      case 'right':\n        anchorXWidth += parseFloat(anchorXStyle.getPropertyValue('margin-right'))\n        break\n    }\n  }\n\n  if (opts.respectAnchorSpacing.y) {\n    const anchorYStyle = getComputedStyle(anchorYElement)\n\n    switch (opts.position.y) {\n      case 'inner-top':\n        anchorYTop += parseFloat(anchorYStyle.getPropertyValue('padding-top'))\n        break\n      case 'top':\n        anchorYTop -= parseFloat(anchorYStyle.getPropertyValue('margin-top'))\n        break\n      case 'inner-bottom':\n        anchorYHeight -= parseFloat(anchorYStyle.getPropertyValue('padding-bottom'))\n        break\n      case 'bottom':\n        anchorXHeight += parseFloat(anchorYStyle.getPropertyValue('margin-bottom'))\n        break\n    }\n  }\n\n  if (window.minitaurDebug) {\n    console.log('minitaur.setDimensions (#' + modal.id + '):', {\n      anxhorX: {\n        element: anchorXElement,\n        left: anchorXLeft,\n        top: anchorXTop,\n        width: anchorXWidth,\n        height: anchorXHeight,\n        rect: anchorXRect,\n        boundary: boundaryX\n      },\n      anxhorY: {\n        element: anchorYElement,\n        left: anchorYLeft,\n        top: anchorYTop,\n        width: anchorYWidth,\n        height: anchorYHeight,\n        rect: anchorYRect,\n        boundary: boundaryY\n      },\n      modal: {\n        height: modalHeight,\n        width: modalWidth\n      },\n      scroll: {\n        x: window.scrollX,\n        y: window.scrollY\n      }\n    })\n  }\n\n  switch (opts.position.x) {\n    case 'inner-left':\n      left = anchorXLeft\n      break\n    case 'left':\n      left = anchorXLeft - modalWidth - 1\n      break\n    case 'middle':\n      left = anchorXLeft + (anchorXWidth / 2) - (modalWidth / 2)\n      break\n    case 'inner-right':\n      left = anchorXLeft + anchorXWidth - modalWidth\n      break\n    case 'right':\n      left = anchorXLeft + anchorXWidth + 1\n      break\n    default:\n      if (typeof opts.position.x === 'string') {\n        if (opts.position.x[opts.position.x.length - 1] === '%') {\n          left = anchorXLeft + ((opts.position.x.substr(0, opts.position.x.length - 1) / 100) * anchorXWidth)\n        } else {\n          left = anchorXLeft + parseInt(opts.position.x)\n        }\n      } else if (Number.isFinite(opts.position.x)) {\n        left = anchorXLeft + opts.position.x\n      } else {\n        console.warn('minitaur (#' + modal.id + ') Invalid position.x value:', opts.position.x)\n        return false\n      }\n  }\n\n  switch (opts.position.y) {\n    case 'inner-top':\n      top = anchorYTop\n      break\n    case 'top':\n      top = anchorYTop - modalHeight - 1\n      break\n    case 'middle':\n      top = anchorYTop + (anchorYHeight / 2) - (modalHeight / 2)\n      break\n    case 'inner-bottom':\n      top = anchorYTop + anchorYHeight - modalHeight\n      break\n    case 'bottom':\n      top = anchorYTop + anchorYHeight + 1\n      break\n    default:\n      if (typeof opts.position.y === 'string') {\n        if (opts.position.y[opts.position.y.length - 1] === '%') {\n          top = anchorYTop + ((opts.position.y.substr(0, opts.position.y.length - 1) / 100) * anchorYHeight)\n        } else {\n          top = anchorYTop + parseInt(opts.position.y)\n        }\n      } else if (Number.isFinite(opts.position.y)) {\n        top = anchorYTop + opts.position.y\n      } else {\n        console.warn('minitaur (#' + modal.id + ') Invalid position.y value:', opts.position.y)\n        return false\n      }\n  }\n\n  if (opts.stayInBounds) {\n    if ((left + modalWidth) >= boundaryX) {\n      left = boundaryX - modalWidth\n    }\n\n    if (left < 0) {\n      left = 0\n    }\n\n    if ((top + modalHeight) >= boundaryY) {\n      top = boundaryY - modalHeight\n      adjustTopPositionFirst = true\n    }\n\n    if (top < 0) {\n      top = 0\n      adjustTopPositionFirst = true\n    }\n\n    if (\n      opts.position.x === 'left' ||\n      opts.position.x === 'right' ||\n      opts.position.y === 'top' ||\n      opts.position.y === 'bottom'\n    ) {\n      let anchorXOverlap = false\n      let anchorYOverlap = false\n\n      if (anchorXElement !== document.body) {\n        let anchorXLeftOverlap = (\n          (left >= anchorXLeft && left < (anchorXLeft + anchorXWidth)) ||\n          (left < anchorXLeft && (left + modalWidth) >= anchorXLeft)\n        )\n\n        let anchorXTopOverlap = (\n          (top >= anchorXTop && top < (anchorXTop + anchorXHeight)) ||\n          (top < anchorXTop && (top + modalHeight) >= anchorXTop)\n        )\n\n        anchorXOverlap = anchorXLeftOverlap && anchorXTopOverlap\n      }\n\n      if (anchorYElement !== document.body) {\n        let anchorYLeftOverlap = (\n          (left >= anchorYLeft && left < (anchorYLeft + anchorYWidth)) ||\n          (left < anchorYLeft && (left + modalWidth) >= anchorYLeft)\n        )\n\n        let anchorYTopOverlap = (\n          (top >= anchorYTop && top < (anchorYTop + anchorYHeight)) ||\n          (top < anchorYTop && (top + modalHeight) >= anchorYTop)\n        )\n\n        anchorYOverlap = anchorYLeftOverlap && anchorYTopOverlap\n      }\n\n      if (anchorXOverlap || anchorYOverlap) {\n        if (!adjustTopPositionFirst) {\n          if (opts.position.x === 'left') {\n            if (!final) {\n              opts.position.x = 'right'\n              return minitaur.setDimensions(modal, opts, true)\n            }\n          } else {\n            opts.position.x = 'left'\n            return minitaur.setDimensions(modal, opts, true)\n          }\n        } else {\n          if (opts.position.y === 'top') {\n            if (!final) {\n              opts.position.y = 'bottom'\n              return minitaur.setDimensions(modal, opts, true)\n            }\n          } else {\n            opts.position.y = 'top'\n            return minitaur.setDimensions(modal, opts, true)\n          }\n        }\n      }\n    }\n  }\n\n  minitaur.setStyle(modal, minitaur.mergeObjects({ zIndex: opts.takeover ? 99999 : null }, opts.style || {}, opts.openStyle || {}, {\n    position: 'absolute',\n    left: left + 'px',\n    top: top + 'px',\n    width: width + 'px',\n    height: height + 'px'\n  }))\n\n  return true\n}\n\nminitaur.setStyle = (element, styles) => {\n  if (window.minitaurDebug) console.log('minitaur.setStyle (' + (element.id ? '#' + element.id : element.tagName) + '):', styles)\n\n  for (let property in styles) {\n    element.style[property] = styles[property]\n  }\n}\n\nminitaur.toggle = (modals, options) => {\n  modals = minitaur.getModals(modals, true)\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      if (window.minitaurDebug) console.log('minitaur.toggle (#' + modal.id + '):', options)\n\n      if (modal.minitaur.isOpen) {\n        modal.minitaur.close(options)\n      } else {\n        modal.minitaur.open(options)\n      }\n    })(modals[i])\n  }\n}\n\nminitaur.triggerEvent = (e) => {\n  const actions = ['close', 'open', 'toggle']\n  const triggerElement = e.currentTarget\n  const opts = minitaur.mergeObjects(minitaur.parseAttributes(triggerElement.dataset), {\n    triggeredElement: triggerElement,\n    triggeredEvent: e\n  })\n\n  for (let i = 0; i < actions.length; i++) {\n    let action = actions[i]\n    let targetElements = triggerElement.getAttribute('data-minitaur-' + action)\n\n    if (targetElements) {\n      if (window.minitaurDebug) console.log('minitaur.triggerEvent:', targetElements, opts)\n      minitaur[action](targetElements, opts)\n    }\n  }\n}\n\nexport default minitaur\n"],"names":["minitaur","mount","options","elements","modals","constructor","Object","mergeObjects","defaultOptions","document","querySelectorAll","HTMLElement","id","getElementById","createElement","getModals","length","i","modal","beforeInit","modalCount","funcs","close","get","parseBreakpoints","kill","putBack","open","set","value","toggle","opts","parseOptions","parseAttributes","dataset","isOpen","parentNode","body","originalElement","cloneNode","originalElementIndex","Array","prototype","indexOf","call","childNodes","originalElementParent","removeChild","setAttribute","window","minitaurDebug","console","log","class","c","classList","add","setStyle","style","closeStyle","initializeTriggers","appendChild","opened","afterInit","push","initialized","addEventListener","documentClick","documentResize","documentScroll","scrollX","scrollY","templates","afterClose","afterOpen","anchor","backdropClass","backdropClosingStyle","backdropOpeningStyle","backdropStyle","backgroundColor","beforeClose","beforeOpen","breakpoints","closeClass","closeDuration","closingClass","closingStyle","closeOnFocusOut","display","visibility","content","openClass","openDuration","openingClass","openingStyle","openStyle","overrides","parameters","position","respectAnchorSpacing","saveOptions","saveParameters","stayInBounds","takeover","template","triggers","clearTimers","resizeTimer","clearTimeout","closeDurationTimer","openDurationTimer","minitaurTempOpts","assign","remove","backdrop","removeAttribute","querySelector","parseInt","left","top","scrollTo","setTimeout","removeEventListener","documentPreventScroll","dispatchEvent","Event","bubbles","e","element","target","closeModals","minitaurIgnore","contains","disableAnimations","type","innerHTML","getElementsByTagName","setDimensions","x","y","verify","selector","matches","breakpointOpts","breakpoint","documentElement","clientWidth","verifiedElements","warn","actions","trigger","action","events","reduce","validTriggers","isArray","t","includes","triggerElement","triggerElementTargets","getAttribute","triggerElementEvents","split","join","te","triggerEvent","a","triggerElements","ae","triggerEvents","triggerTargets","aee","append","insertBefore","prepend","nullActions","triggerElementTargetIndex","splice","isObject","obj","objects","prev","keys","forEach","key","pVal","oVal","filter","index","array","templateContentElement","templateContent","templateClone","templateHasContentElement","apply","from","startsWith","replace","parameter","RegExp","right","bottom","zIndex","data","keyPrefix","arrayParameters","objectParameters","deepObjectParameters","validParameters","concat","substring","toLowerCase","property","charAt","propSet","o","objKey","objProp","objPropKey","slice","match","final","triggeredElement","anchorXElement","anchorYElement","modalClone","opacity","transition","modalStyle","getComputedStyle","anchorXRect","getBoundingClientRect","anchorXLeft","anchorXTop","anchorXWidth","width","anchorXHeight","height","anchorYRect","anchorYLeft","anchorYTop","anchorYWidth","anchorYHeight","modalMarginLeft","parseFloat","getPropertyValue","modalMarginTop","modalMarginRight","modalMarginBottom","modalWidth","offsetWidth","modalHeight","offsetHeight","boundaryX","boundaryY","clientHeight","adjustTopPositionFirst","innerWidth","innerHeight","anchorXStyle","anchorYStyle","anxhorX","rect","boundary","anxhorY","scroll","substr","Number","isFinite","anchorXOverlap","anchorYOverlap","anchorXLeftOverlap","anchorXTopOverlap","anchorYLeftOverlap","anchorYTopOverlap","styles","tagName","currentTarget","triggeredEvent","targetElements"],"mappings":"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"}