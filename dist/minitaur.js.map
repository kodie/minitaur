{"version":3,"file":"minitaur.js","sources":["../src/minitaur.js"],"sourcesContent":["/*!\n  minitaur v0.2.0 (https://github.com/kodie/minitaur)\n  by Kodie Grantham (https://kodieg.com)\n*/\n\nconst minitaur = (mount, options) => {\n  let elements = []\n  let modals = []\n\n  if (mount && mount.constructor === Object) {\n    options = mount\n    mount = null\n  }\n\n  options = minitaur.mergeObjects(minitaur.defaultOptions, options || {})\n\n  if (!mount) mount = options.mount\n\n  if (typeof mount === 'string') {\n    elements = document.querySelectorAll(mount)\n  } else if (mount instanceof HTMLElement) {\n    elements = [mount]\n  } else if (!mount) {\n    if (options.id) {\n      elements = [document.getElementById(options.id) || document.createElement('div')]\n    } else {\n      elements = [document.createElement('div')]\n    }\n  }\n\n  elements = minitaur.getModals(elements)\n\n  if (elements && elements.length) {\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        if (modal.minitaur) {\n          return true\n        }\n\n        if (options.beforeInit && options.beforeInit(modal) === false) {\n          return false\n        }\n\n        minitaur.modalCount++\n\n        let funcs = {\n          close: function (options) {\n            return minitaur.close(modal, options)\n          },\n          get: function (parseBreakpoints) {\n            return minitaur.get(modal, parseBreakpoints, false)\n          },\n          kill: function (putBack) {\n            return minitaur.kill(modal, putBack)\n          },\n          open: function (options) {\n            return minitaur.open(modal, options)\n          },\n          set: function (options, value) {\n            return minitaur.set(modal, options, value)\n          },\n          toggle: function (options) {\n            return minitaur.toggle(modal, options)\n          }\n        }\n\n        let opts = minitaur.parseOptions(minitaur.mergeObjects(options, minitaur.parseAttributes(modal.dataset), funcs, {\n          isOpen: false\n        }))\n\n        if (modal.parentNode && modal.parentNode !== document.body) {\n          opts.originalElement = modal.cloneNode(true)\n          opts.originalElementIndex = Array.prototype.indexOf.call(modal.parentNode.childNodes, modal)\n          opts.originalElementParent = modal.parentNode\n          modal.parentNode.removeChild(modal)\n        }\n\n        modal.minitaur = opts\n        modal.setAttribute('data-minitaur', '')\n\n        opts = minitaur.get(modal, true, false)\n\n        if (opts.id) {\n          modal.id = opts.id\n        } else if (!modal.id) {\n          modal.id = 'minitaur-' + minitaur.modalCount\n        }\n\n        if (window.minitaurDebug) console.log('minitaur.init (#' + modal.id + '):', opts)\n\n        if (opts.class) {\n          if (typeof opts.class === 'string') {\n            opts.class = [opts.class]\n          }\n\n          for (let c = 0; c < opts.class.length; c++) {\n            modal.classList.add(opts.class[c])\n          }\n        }\n\n        minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.closeStyle || {}))\n        minitaur.initiateTriggers(modal)\n\n        if (!modal.parentNode) {\n          document.body.appendChild(modal)\n        }\n\n        if (opts.opened) {\n          modal.minitaur.open()\n        } else {\n          modal.minitaur.close()\n        }\n\n        if (opts.afterInit) {\n          options.afterInit(modal)\n        }\n\n        modals.push(modal)\n      })(elements[i])\n    }\n  }\n\n  if (!minitaur.initiated) {\n    minitaur.initiated = true\n\n    document.addEventListener('click', minitaur.documentClick)\n    window.addEventListener('resize', minitaur.documentResize)\n    window.addEventListener('scroll', minitaur.documentScroll)\n  }\n\n  if (modals.length) {\n    if (modals.length === 1) {\n      return modals[0]\n    }\n\n    return modals\n  }\n\n  return false\n}\n\nminitaur.initiated = false\nminitaur.modalCount = 0\nminitaur.templates = {}\n\nminitaur.defaultOptions = {\n  afterClose: null,\n  afterInit: null,\n  afterOpen: null,\n  anchor: null,\n  backdropClass: 'minitaur-backdrop',\n  backdropClosingStyle: null,\n  backdropOpeningStyle: null,\n  backdropStyle: {\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  beforeClose: null,\n  beforeInit: null,\n  beforeOpen: null,\n  breakpoints: null,\n  class: 'minitaur',\n  closeClass: 'closed',\n  closeDuration: 0,\n  closingClass: 'closing',\n  closingStyle: null,\n  closeOnFocusOut: true,\n  closeStyle: {\n    display: 'none',\n    visibility: 'hidden'\n  },\n  content: null,\n  id: null,\n  mount: '.minitaur, [data-minitaur]',\n  opened: false,\n  openClass: 'opened',\n  openDuration: 0,\n  openingClass: 'opening',\n  openingStyle: {\n    display: 'block',\n    visibility: 'visible'\n  },\n  openStyle: null,\n  parameters: null,\n  position: 'middle',\n  respectAnchorSpacing: false,\n  stayInBounds: true,\n  style: null,\n  takeover: false,\n  template: null,\n  triggers: []\n}\n\nminitaur.clearTimers = function (modal) {\n  if (minitaur.resizeTimer) {\n    clearTimeout(minitaur.resizeTimer)\n    minitaur.resizeTimer = null\n  }\n\n  if (modal) {\n    if (modal.minitaur.closeDurationTimer) {\n      clearTimeout(modal.minitaur.closeDurationTimer)\n      modal.minitaur.closeDurationTimer = null\n    }\n\n    if (modal.minitaur.openDurationTimer) {\n      clearTimeout(modal.minitaur.openDurationTimer)\n      modal.minitaur.openDurationTimer = null\n    }\n  }\n}\n\nminitaur.close = (modals, options) => {\n  modals = minitaur.getModals(modals, true)\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      if (options) modal.minitaur.set(options)\n\n      const opts = minitaur.get(modal, true, false)\n\n      if (window.minitaurDebug) console.log('minitaur.close (#' + modal.id + '):', opts)\n\n      minitaur.clearTimers(modal)\n\n      if (opts.beforeClose && opts.beforeClose(modal) === false) {\n        return false\n      }\n\n      modal.classList.remove(opts.openClass)\n      modal.classList.remove(opts.openingClass)\n      modal.classList.add(opts.closingClass)\n      minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.closingStyle || {}))\n\n      let backdrop = null\n\n      if (opts.takeover) {\n        modal.removeAttribute('data-minitaur-taking-over')\n\n        backdrop = document.querySelector('[data-minitaur-backdrop=\"#' + modal.id + '\"]')\n\n        if (backdrop) {\n          backdrop.classList.remove(opts.openClass)\n          backdrop.classList.remove(opts.openingClass)\n          backdrop.classList.add(opts.closingClass)\n\n          const scrollX = parseInt(document.body.style.left || '0') * -1\n          const scrollY = parseInt(document.body.style.top || '0') * -1\n\n          minitaur.setStyle(backdrop, opts.backdropClosingStyle || {})\n\n          minitaur.setStyle(document.body, {\n            position: 'relative',\n            left: null,\n            top: null,\n            height: null,\n            width: null\n          })\n\n          window.scrollTo(scrollX, scrollY)\n        }\n      }\n\n      modal.minitaur.closeDurationTimer = setTimeout(function () {\n        modal.minitaur.isOpen = false\n\n        modal.classList.remove(opts.closingClass)\n        modal.classList.add(opts.closeClass)\n\n        if (opts.takeover && backdrop) {\n          document.body.removeChild(backdrop)\n          window.addEventListener('scroll', minitaur.documentScroll)\n        }\n\n        minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.closeStyle || {}))\n\n        modal.dispatchEvent(new Event('close', { bubbles: true }))\n\n        if (opts.afterClose) {\n          opts.afterClose(modal)\n        }\n      }, opts.closeDuration || 0)\n    })(modals[i])\n  }\n}\n\nminitaur.documentClick = (e) => {\n  let element = e.target\n  let closeModals = true\n\n  do {\n    if (element === document.body) break\n    if (\n      element.minitaur ||\n      element.minitaurIgnore ||\n      element.classList.contains('minitaur-ignore')\n    ) closeModals = false\n  } while ((element = element.parentNode))\n\n  if (closeModals) {\n    const modals = minitaur.getModals('[data-minitaur]', true)\n\n    for (let i = 0; i < modals.length; i++) {\n      let modal = modals[i]\n\n      if (modal.minitaur.closeOnFocusOut && modal.minitaur.isOpen === true) {\n        modal.minitaur.close()\n      }\n    }\n  }\n}\n\nminitaur.documentResize = (e) => {\n  minitaur.clearTimers()\n\n  minitaur.resizeTimer = setTimeout(function () {\n    const elements = minitaur.getModals('[data-minitaur]', true)\n\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        if (modal.minitaur.isOpen) {\n          modal.minitaur.open()\n        }\n      })(elements[i])\n    }\n  }, 60)\n}\n\nminitaur.documentScroll = (e) => {\n  minitaur.clearTimers()\n\n  minitaur.resizeTimer = setTimeout(function () {\n    const elements = minitaur.getModals('[data-minitaur]', true)\n\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        const opts = modal.minitaur\n\n        if (opts.isOpen && !opts.takeover && (opts.anchor.x === 'viewport' || opts.anchor.y === 'viewport')) {\n          modal.minitaur.open()\n        }\n      })(elements[i])\n    }\n  }, 60)\n}\n\nminitaur.get = (elements, parseBreakpoints, verify) => {\n  elements = minitaur.getModals(elements, verify)\n\n  let modals = []\n\n  for (let i = 0; i < elements.length; i++) {\n    (function (modal) {\n      let opts = minitaur.mergeObjects(modal.minitaur, { element: modal })\n\n      if (parseBreakpoints && opts.breakpoints) {\n        let breakpointOpts = null\n\n        for (let breakpoint in opts.breakpoints) {\n          if (document.documentElement.clientWidth >= parseInt(breakpoint)) {\n            breakpointOpts = opts.breakpoints[breakpoint]\n          }\n        }\n\n        if (breakpointOpts) {\n          opts = minitaur.mergeObjects(opts, breakpointOpts)\n        }\n\n        delete opts.breakpoints\n      }\n\n      modals.push(opts)\n    })(elements[i])\n  }\n\n  if (modals.length) {\n    if (modals.length === 1) {\n      return modals[0]\n    }\n\n    return modals\n  }\n\n  return false\n}\n\nminitaur.getModals = (elements, verify) => {\n  if (typeof elements === 'string') {\n    elements = document.querySelectorAll(elements)\n  } else if (elements instanceof HTMLElement) {\n    elements = [elements]\n  }\n\n  if (verify) {\n    let verifiedElements = []\n\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        if (!modal.minitaur) {\n          console.warn('Element doesn\\'t appear to be a minitaur instance:', modal)\n          return\n        }\n\n        verifiedElements.push(modal)\n      })(elements[i])\n    }\n\n    return verifiedElements\n  }\n\n  return elements\n}\n\nminitaur.initiateTriggers = (modals) => {\n  modals = minitaur.getModals(modals, true)\n\n  let actions = ['close', 'open', 'toggle']\n\n  for (let i = 0; i < modals.length; i++) {\n    const modal = modals[i]\n    let opts = minitaur.get(modal, true, false)\n    let triggers = opts.triggers || opts.trigger\n\n    if (typeof triggers === 'string') {\n      triggers = [{\n        action: 'toggle',\n        elements: triggers,\n        events: ['click']\n      }]\n    } else if (!triggers) {\n      triggers = []\n    }\n\n    triggers = triggers.reduce((validTriggers, trigger) => {\n      if (Array.isArray(trigger)) {\n        trigger.elements = trigger\n      } else if (!trigger.elements) {\n        console.warn('(minitaur: #' + modal.id + ') A trigger is missing it\\'s elements option.', trigger)\n        return validTriggers\n      }\n\n      validTriggers.push(trigger)\n      return validTriggers\n    }, [])\n\n    for (let t = 0; t < triggers.length; t++) {\n      let trigger = triggers[t]\n\n      if (typeof trigger === 'string') {\n        trigger = {\n          action: 'toggle',\n          elements: trigger,\n          events: ['click']\n        }\n      }\n\n      if (typeof trigger.elements === 'string') {\n        trigger.elements = document.querySelectorAll(trigger.elements)\n      } else if (trigger.elements instanceof HTMLElement) {\n        trigger.elements = [trigger.elements]\n      }\n\n      if (!trigger.events) {\n        trigger.events = ['click']\n      } else if (typeof trigger.events === 'string') {\n        trigger.events = [trigger.events]\n      }\n\n      if (!trigger.action || !actions.includes(trigger.action)) {\n        trigger.action = 'toggle'\n      }\n\n      for (let e = 0; e < trigger.elements.length; e++) {\n        const triggerElement = trigger.elements[e]\n        let triggerElementTargets = triggerElement.getAttribute('data-minitaur-' + trigger.action)\n        let triggerElementEvents = triggerElement.getAttribute('data-minitaur-event')\n\n        if (triggerElementTargets) {\n          triggerElementTargets = triggerElementTargets.split(',')\n\n          if (!triggerElementTargets.includes('#' + modal.id)) {\n            triggerElementTargets.push('#' + modal.id)\n            triggerElement.setAttribute('data-minitaur-' + trigger.action, triggerElementTargets.join(','))\n          }\n        } else {\n          triggerElement.setAttribute('data-minitaur-' + trigger.action, '#' + modal.id)\n        }\n\n        if (triggerElementEvents) {\n          triggerElementEvents = triggerElementEvents.split(',')\n\n          for (let te = 0; te < trigger.events.length; te++) {\n            const triggerEvent = trigger.events[te]\n\n            if (!triggerElementEvents.includes(triggerEvent)) {\n              triggerElementEvents.push(triggerEvent)\n            }\n          }\n\n          triggerElement.setAttribute('data-minitaur-event', triggerElementEvents.join(','))\n        } else {\n          triggerElement.setAttribute('data-minitaur-event', trigger.events.join(','))\n        }\n      }\n    }\n\n    for (let a = 0; a < actions.length; a++) {\n      const action = actions[a]\n      const triggerElements = document.querySelectorAll('[data-minitaur-' + action + '=\"#' + modal.id + '\"], #' + modal.id + ' [data-minitaur-' + action + '=\"\"]')\n\n      for (let ae = 0; ae < triggerElements.length; ae++) {\n        (function (triggerElement) {\n          let triggerEvents = triggerElement.getAttribute('data-minitaur-event')\n          let triggerTargets = triggerElement.getAttribute('data-minitaur-' + action)\n\n          if (triggerTargets === '') {\n            triggerElement.setAttribute('data-minitaur-' + action, '#' + modal.id)\n          }\n\n          if (triggerEvents) {\n            triggerEvents = triggerEvents.split(',')\n          } else {\n            triggerEvents = ['click']\n            triggerElement.setAttribute('data-minitaur-event', 'click')\n          }\n\n          for (let aee = 0; aee < triggerEvents.length; aee++) {\n            let triggerEvent = triggerEvents[aee]\n            triggerElement.addEventListener(triggerEvent, minitaur.triggerEvent)\n          }\n\n          triggerElement.minitaurIgnore = true\n          triggerElement.setAttribute('data-minitaur-trigger', '')\n        })(triggerElements[ae])\n      }\n    }\n  }\n}\n\nminitaur.kill = (modals, putBack) => {\n  modals = minitaur.getModals(modals, true)\n\n  const actions = ['close', 'open', 'toggle']\n  const triggerElements = document.querySelectorAll('[data-minitaur-trigger]')\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      const opts = minitaur.get(modal, true, false)\n\n      if (opts.isOpen) opts.close()\n\n      document.body.removeChild(modal)\n\n      if (putBack !== false) {\n        if (opts.originalElement && opts.originalElementParent && opts.originalElementIndex) {\n          if (opts.originalElementIndex) {\n            if (opts.originalElementIndex > opts.originalElementParent.childNodes.length - 1) {\n              opts.originalElementParent.append(opts.originalElement)\n            } else {\n              opts.originalElementParent.insertBefore(\n                opts.originalElement,\n                opts.originalElementParent.childNodes[opts.originalElementIndex]\n              )\n            }\n          } else {\n            opts.originalElementParent.prepend(opts.originalElement)\n          }\n        }\n      }\n\n      for (let t = 0; t < triggerElements.length; t++) {\n        const triggerElement = triggerElements[t]\n        let nullActions = 0\n\n        for (let a = 0; a < actions.length; a++) {\n          const action = actions[a]\n          let triggerElementTargets = triggerElement.getAttribute('data-minitaur-' + action)\n\n          if (triggerElementTargets) {\n            triggerElementTargets = triggerElementTargets.split(',')\n\n            let triggerElementTargetIndex = triggerElementTargets.indexOf('#' + modal.id)\n\n            if (triggerElementTargetIndex !== -1) {\n              triggerElementTargets.splice(triggerElementTargetIndex, 1)\n\n              if (!triggerElementTargets.length) {\n                nullActions++\n              }\n            }\n          } else {\n            nullActions++\n          }\n        }\n\n        if (nullActions === actions.length) {\n          let triggerEvents = triggerElement.getAttribute('data-minitaur-event')\n          triggerEvents = triggerEvents ? triggerEvents.split(',') : []\n\n          triggerElement.removeAttribute('data-minitaur-event')\n          triggerElement.removeAttribute('data-minitaur-trigger')\n\n          for (let e = 0; e < triggerEvents.length; e++) {\n            triggerElement.removeEventListener(triggerEvents[e], minitaur.triggerEvent)\n          }\n\n          delete triggerElement.minitaurIgnore\n        }\n      }\n\n      minitaur.modalCount--\n    })(modals[i])\n  }\n\n  if (!minitaur.modalCount) {\n    document.removeEventListener('click', minitaur.documentClick)\n    window.removeEventListener('resize', minitaur.documentResize)\n    window.removeEventListener('scroll', minitaur.documentScroll)\n\n    minitaur.initiated = false\n  }\n}\n\nminitaur.mergeObjects = (...objects) => {\n  const isObject = function (obj) { return obj && typeof obj === 'object' && !(obj instanceof HTMLElement) }\n\n  return objects.reduce((prev, obj) => {\n    Object.keys(obj).forEach((key) => {\n      const pVal = prev[key]\n      const oVal = obj[key]\n\n      if (Array.isArray(pVal) && Array.isArray(oVal)) {\n        prev[key] = [...pVal, ...oVal].filter((element, index, array) => {\n          return array.indexOf(element) === index\n        })\n      } else if (isObject(pVal) && isObject(oVal)) {\n        prev[key] = minitaur.mergeObjects(pVal, oVal)\n      } else {\n        prev[key] = oVal\n      }\n    })\n\n    return prev\n  }, {})\n}\n\nminitaur.open = (modals, options) => {\n  modals = minitaur.getModals(modals, true)\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      if (options) modal.minitaur.set(options)\n\n      let opts = minitaur.get(modal, true, false)\n\n      if (window.minitaurDebug) console.log('minitaur.open (#' + modal.id + '):', opts)\n\n      minitaur.clearTimers(modal)\n\n      if (opts.beforeOpen && opts.beforeOpen(modal) === false) {\n        return false\n      }\n\n      if (opts.content) {\n        if (typeof opts.content === 'function') {\n          opts.content = opts.content(modal)\n        }\n\n        if (modal.innerHTML !== opts.content) {\n          modal.innerHTML = opts.content\n        }\n      }\n\n      if (opts.template) {\n        const templateContentElement = modal.querySelector('.minitaur-content')\n        let templateContent = modal.innerHTML\n        let template = minitaur.templates[opts.template] || opts.template\n\n        if (templateContentElement) {\n          templateContent = templateContentElement.innerHTML\n        }\n\n        if (typeof template === 'function') {\n          template = template(modal)\n        }\n\n        const templateClone = document.createElement('div')\n        templateClone.innerHTML = template\n        const templateHasContentElement = !!templateClone.querySelector('.minitaur-content')\n        templateClone.remove()\n\n        if (!templateHasContentElement) {\n          templateContent = `<div class=\"minitaur-content\">${templateContent}</div>`\n        }\n\n        modal.classList.remove.apply(modal.classList, Array.from(modal.classList).filter(c => c.startsWith('minitaur-template-')))\n\n        if (minitaur.templates[opts.template]) {\n          modal.classList.add('minitaur-template-' + opts.template)\n        }\n\n        modal.innerHTML = template.replace('{minitaur-content}', templateContent)\n      }\n\n      if (opts.parameters) {\n        for (let parameter in opts.parameters) {\n          modal.innerHTML = modal.innerHTML.replace(\n            new RegExp('{' + parameter + '}', 'g'),\n            opts.parameters[parameter]\n          )\n        }\n      }\n\n      modal.classList.remove(opts.closeClass)\n      modal.classList.remove(opts.closingClass)\n      modal.classList.add(opts.openingClass)\n      minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.openingStyle || {}))\n\n      let backdrop = null\n\n      if (opts.takeover && !document.querySelector('#' + modal.id + '-backdrop')) {\n        window.removeEventListener('scroll', minitaur.documentScroll)\n\n        minitaur.close('[data-minitaur][data-minitaur-taking-over]')\n\n        backdrop = document.createElement('div')\n\n        backdrop.id = modal.id + '-backdrop'\n\n        modal.setAttribute('data-minitaur-taking-over', '')\n        backdrop.setAttribute('data-minitaur-backdrop', '#' + modal.id)\n        backdrop.classList.add(opts.backdropClass)\n        backdrop.classList.add(opts.openingClass)\n\n        minitaur.setStyle(backdrop, minitaur.mergeObjects({\n          position: 'absolute',\n          left: '0px',\n          top: '0px',\n          right: '0px',\n          bottom: '0px',\n          zIndex: 99998\n        }, opts.backdropOpeningStyle || {}))\n\n        minitaur.setStyle(document.body, {\n          position: 'fixed',\n          left: '-' + window.scrollX + 'px',\n          top: '-' + window.scrollY + 'px',\n          height: document.body.clientHeight + 'px',\n          width: document.body.clientWidth + 'px'\n        })\n\n        document.body.insertBefore(backdrop, modal)\n      } else {\n        minitaur.setStyle(document.body, { position: 'relative' })\n      }\n\n      modal.minitaur.openDurationTimer = setTimeout(function () {\n        modal.minitaur.isOpen = true\n\n        modal.classList.remove(opts.openingClass)\n        modal.classList.add(opts.openClass)\n\n        if (opts.takeover && backdrop) {\n          backdrop.classList.remove(opts.openingClass)\n          backdrop.classList.add(opts.openClass)\n          minitaur.setStyle(backdrop, opts.backdropStyle || {})\n        }\n\n        minitaur.setDimensions(modal, opts)\n        minitaur.initiateTriggers(modal)\n\n        modal.dispatchEvent(new Event('open', { bubbles: true }))\n\n        if (opts.afterOpen) {\n          opts.afterOpen(modal)\n        }\n      }, opts.openDuration || 0)\n    })(modals[i])\n  }\n}\n\nminitaur.parseAttributes = (data) => {\n  let opts = {}\n  const keyPrefix = 'minitaur'\n  const arrayParameters = ['class']\n  const objectParameters = ['anchor', 'backdropStyle', 'breakpoints', 'closeStyle', 'openStyle', 'parameters', 'position', 'respectAnchorSpacing', 'style']\n  const deepObjectParameters = ['breakpoints']\n  const validParameters = Object.keys(minitaur.defaultOptions).concat(['triggerElement'])\n\n  for (let key in data) {\n    if (key !== keyPrefix && key.substring(0, keyPrefix.length).toLowerCase() === keyPrefix.toLowerCase()) {\n      const property = key.charAt(keyPrefix.length).toLowerCase() + key.substring(keyPrefix.length + 1).replace('-', '')\n      let propSet = false\n      let value = data[key]\n\n      if (value.toLowerCase() === 'true' || !value.length) {\n        value = true\n      } else if (value.toLowerCase() === 'false') {\n        value = false\n      }\n\n      if (arrayParameters.includes(property)) {\n        value = value.split(',')\n      }\n\n      for (let o = 0; o < objectParameters.length; o++) {\n        const objKey = objectParameters[o]\n        const objProp = property.substring(0, objKey.length)\n\n        if (objProp.length !== property.length && objProp.toLowerCase() === objKey.toLowerCase()) {\n          const objPropKey = property.substring(objKey.length).toLowerCase()\n\n          if (!opts[objKey]) {\n            opts[objKey] = {}\n          }\n\n          if (deepObjectParameters.includes(objProp)) {\n            let breakpoint = objPropKey.match(/^\\d+/)\n\n            if (breakpoint) {\n              opts[objKey][breakpoint[0]] = minitaur.parseAttributes({ [keyPrefix + objPropKey.substring(breakpoint[0].length)]: value })\n            } else {\n              opts[objKey] = minitaur.parseAttributes({ [keyPrefix + objPropKey]: value })\n            }\n          } else {\n            opts[objKey][objPropKey] = value\n          }\n\n          propSet = true\n          break\n        }\n      }\n\n      if (!propSet && validParameters.includes(property)) {\n        opts[property] = value\n      }\n    }\n  }\n\n  return opts\n}\n\nminitaur.parseOptions = (opts) => {\n  if (opts.takeover) opts.anchor = 'viewport'\n\n  if (!opts.anchor || typeof opts.anchor === 'string') {\n    opts.anchor = {\n      x: opts.anchor,\n      y: opts.anchor\n    }\n  }\n\n  if (!opts.position || typeof opts.position === 'string') {\n    opts.position = opts.position ? opts.position.split(' ') : ['middle']\n    opts.position = {\n      x: opts.position[1] || 'middle',\n      y: opts.position[0]\n    }\n  }\n\n  if (!opts.position.x) opts.position.x = 'middle'\n  if (!opts.position.y) opts.position.y = 'middle'\n\n  if (!opts.respectAnchorSpacing || typeof opts.respectAnchorSpacing === 'boolean') {\n    opts.respectAnchorSpacing = {\n      x: opts.respectAnchorSpacing,\n      y: opts.respectAnchorSpacing\n    }\n  }\n\n  if (!opts.respectAnchorSpacing.x) opts.respectAnchorSpacing.x = false\n  if (!opts.respectAnchorSpacing.y) opts.respectAnchorSpacing.y = false\n\n  return opts\n}\n\nminitaur.set = (modals, options, value) => {\n  modals = minitaur.getModals(modals, true)\n\n  if (typeof options === 'string') {\n    options = { [options]: value }\n  }\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      if (window.minitaurDebug) console.log('minitaur.set (#' + modal.id + '):', options)\n      modal.minitaur = minitaur.parseOptions(minitaur.mergeObjects(modal.minitaur, options || {}))\n    })(modals[i])\n  }\n}\n\nminitaur.setDimensions = (modal, options, final) => {\n  let opts = minitaur.get(modal, true, false)\n\n  opts = minitaur.mergeObjects(opts, options || {})\n\n  if (!opts.anchor.x) opts.anchor.x = opts.triggerElement || document.body\n  if (!opts.anchor.y) opts.anchor.y = opts.triggerElement || document.body\n\n  let anchorXElement = null\n  let anchorYElement = null\n\n  if (typeof opts.anchor.x === 'string') {\n    if (opts.anchor.x === 'viewport') {\n      anchorXElement = document.body\n    } else {\n      anchorXElement = document.querySelector(opts.anchor.x)\n    }\n  } else {\n    anchorXElement = opts.anchor.x\n  }\n\n  if (typeof opts.anchor.y === 'string') {\n    if (opts.anchor.y === 'viewport') {\n      anchorYElement = document.body\n    } else {\n      anchorYElement = document.querySelector(opts.anchor.y)\n    }\n  } else {\n    anchorYElement = opts.anchor.y\n  }\n\n  if (!(anchorXElement instanceof HTMLElement)) {\n    console.warn('(minitaur: #' + modal.id + ') Unable to find anchor.x:', anchorXElement)\n    anchorXElement = document.body\n  }\n\n  if (!(anchorYElement instanceof HTMLElement)) {\n    console.warn('(minitaur: #' + modal.id + ') Unable to find anchor.y:', anchorYElement)\n    anchorYElement = document.body\n  }\n\n  const modalClone = modal.cloneNode(true)\n\n  minitaur.setStyle(modalClone, minitaur.mergeObjects(opts.style || {}, opts.openStyle || {}, {\n    left: '0px',\n    opacity: '0',\n    position: 'absolute',\n    top: '0px',\n    transition: 'none'\n  }))\n\n  document.body.appendChild(modalClone)\n\n  const modalStyle = getComputedStyle(modalClone)\n  const anchorXRect = anchorXElement.getBoundingClientRect()\n  let anchorXLeft = anchorXRect.x + window.scrollX\n  let anchorXTop = anchorXRect.y + window.scrollY\n  let anchorXWidth = anchorXRect.width\n  let anchorXHeight = anchorXRect.height\n  let anchorYRect = anchorYElement.getBoundingClientRect()\n  let anchorYLeft = anchorYRect.x + window.scrollX\n  let anchorYTop = anchorYRect.y + window.scrollY\n  let anchorYWidth = anchorYRect.width\n  let anchorYHeight = anchorYRect.height\n  const modalMarginLeft = parseFloat(modalStyle.getPropertyValue('margin-left'))\n  const modalMarginTop = parseFloat(modalStyle.getPropertyValue('margin-top'))\n  const modalMarginRight = parseFloat(modalStyle.getPropertyValue('margin-right'))\n  const modalMarginBottom = parseFloat(modalStyle.getPropertyValue('margin-bottom'))\n  const modalWidth = modalClone.offsetWidth + modalMarginLeft + modalMarginRight\n  const modalHeight = modalClone.offsetHeight + modalMarginTop + modalMarginBottom\n  let left = 0\n  let top = 0\n  let width = parseFloat(modalClone.style.width || modalStyle.getPropertyValue('width'))\n  let height = parseFloat(modalClone.style.height || modalStyle.getPropertyValue('height'))\n  let boundaryX = document.body.clientWidth\n  let boundaryY = document.body.clientHeight\n  let adjustTopPositionFirst = false\n\n  document.body.removeChild(modalClone)\n\n  if (opts.anchor.x === 'viewport') {\n    anchorXLeft = window.scrollX\n    anchorXTop = window.scrollY\n    anchorXWidth = window.innerWidth\n    anchorXHeight = window.innerHeight\n    boundaryX = anchorXWidth + window.scrollX\n  }\n\n  if (opts.anchor.y === 'viewport') {\n    anchorYLeft = window.scrollX\n    anchorYTop = window.scrollY\n    anchorYWidth = window.innerWidth\n    anchorYHeight = window.innerHeight\n    boundaryY = anchorYHeight + window.scrollY\n  }\n\n  if (opts.takeover) {\n    anchorXLeft = 0 - parseInt(document.body.style.left || '0')\n    anchorXTop = 0 - parseInt(document.body.style.top || '0')\n    anchorYLeft = 0 - parseInt(document.body.style.left || '0')\n    anchorYTop = 0 - parseInt(document.body.style.top || '0')\n    boundaryX = anchorXLeft + window.innerWidth\n    boundaryY = anchorYTop + window.innerHeight\n  }\n\n  if (anchorXElement === document.body) {\n    switch (opts.position.x) {\n      case 'left':\n        opts.position.x = 'inner-left'\n        break\n      case 'right':\n        opts.position.x = 'inner-right'\n        break\n    }\n  }\n\n  if (anchorYElement === document.body) {\n    switch (opts.position.y) {\n      case 'top':\n        opts.position.y = 'inner-top'\n        break\n      case 'bottom':\n        opts.position.y = 'inner-bottom'\n        break\n    }\n  }\n\n  if (opts.respectAnchorSpacing.x) {\n    const anchorXStyle = getComputedStyle(anchorXElement)\n\n    switch (opts.position.x) {\n      case 'inner-left':\n        anchorXLeft += parseFloat(anchorXStyle.getPropertyValue('padding-left'))\n        break\n      case 'left':\n        anchorXLeft -= parseFloat(anchorXStyle.getPropertyValue('margin-left'))\n        break\n      case 'inner-right':\n        anchorXWidth -= parseFloat(anchorXStyle.getPropertyValue('padding-right'))\n        break\n      case 'right':\n        anchorXWidth += parseFloat(anchorXStyle.getPropertyValue('margin-right'))\n        break\n    }\n  }\n\n  if (opts.respectAnchorSpacing.y) {\n    const anchorYStyle = getComputedStyle(anchorYElement)\n\n    switch (opts.position.y) {\n      case 'inner-top':\n        anchorYTop += parseFloat(anchorYStyle.getPropertyValue('padding-top'))\n        break\n      case 'top':\n        anchorYTop -= parseFloat(anchorYStyle.getPropertyValue('margin-top'))\n        break\n      case 'inner-bottom':\n        anchorYHeight -= parseFloat(anchorYStyle.getPropertyValue('padding-bottom'))\n        break\n      case 'bottom':\n        anchorXHeight += parseFloat(anchorYStyle.getPropertyValue('margin-bottom'))\n        break\n    }\n  }\n\n  if (window.minitaurDebug) {\n    console.log('minitaur.setDimensions (#' + modal.id + '):', {\n      anxhorX: {\n        element: anchorXElement,\n        left: anchorXLeft,\n        top: anchorXTop,\n        width: anchorXWidth,\n        height: anchorXHeight,\n        rect: anchorXRect,\n        boundary: boundaryX\n      },\n      anxhorY: {\n        element: anchorYElement,\n        left: anchorYLeft,\n        top: anchorYTop,\n        width: anchorYWidth,\n        height: anchorYHeight,\n        rect: anchorYRect,\n        boundary: boundaryY\n      },\n      modal: {\n        height: modalHeight,\n        width: modalWidth\n      },\n      scroll: {\n        x: window.scrollX,\n        y: window.scrollY\n      }\n    })\n  }\n\n  switch (opts.position.x) {\n    case 'inner-left':\n      left = anchorXLeft\n      break\n    case 'left':\n      left = anchorXLeft - modalWidth - 1\n      break\n    case 'middle':\n      left = anchorXLeft + (anchorXWidth / 2) - (modalWidth / 2)\n      break\n    case 'inner-right':\n      left = anchorXLeft + anchorXWidth - modalWidth\n      break\n    case 'right':\n      left = anchorXLeft + anchorXWidth + 1\n      break\n    default:\n      if (typeof opts.position.x === 'string') {\n        if (opts.position.x[opts.position.x.length - 1] === '%') {\n          left = anchorXLeft + ((opts.position.x.substr(0, opts.position.x.length - 1) / 100) * anchorXWidth)\n        } else {\n          left = anchorXLeft + parseInt(opts.position.x)\n        }\n      } else if (Number.isFinite(opts.position.x)) {\n        left = anchorXLeft + opts.position.x\n      } else {\n        console.warn('minitaur (#' + modal.id + ') Invalid position.x value:', opts.position.x)\n        return false\n      }\n  }\n\n  switch (opts.position.y) {\n    case 'inner-top':\n      top = anchorYTop\n      break\n    case 'top':\n      top = anchorYTop - modalHeight - 1\n      break\n    case 'middle':\n      top = anchorYTop + (anchorYHeight / 2) - (modalHeight / 2)\n      break\n    case 'inner-bottom':\n      top = anchorYTop + anchorYHeight - modalHeight\n      break\n    case 'bottom':\n      top = anchorYTop + anchorYHeight + 1\n      break\n    default:\n      if (typeof opts.position.y === 'string') {\n        if (opts.position.y[opts.position.y.length - 1] === '%') {\n          top = anchorYTop + ((opts.position.y.substr(0, opts.position.y.length - 1) / 100) * anchorYHeight)\n        } else {\n          top = anchorYTop + parseInt(opts.position.y)\n        }\n      } else if (Number.isFinite(opts.position.y)) {\n        top = anchorYTop + opts.position.y\n      } else {\n        console.warn('minitaur (#' + modal.id + ') Invalid position.y value:', opts.position.y)\n        return false\n      }\n  }\n\n  if (opts.stayInBounds) {\n    if ((left + modalWidth) >= boundaryX) {\n      left = boundaryX - modalWidth\n    }\n\n    if (left < 0) {\n      left = 0\n    }\n\n    if ((top + modalHeight) >= boundaryY) {\n      top = boundaryY - modalHeight\n      adjustTopPositionFirst = true\n    }\n\n    if (top < 0) {\n      top = 0\n      adjustTopPositionFirst = true\n    }\n\n    if (\n      opts.position.x === 'left' ||\n      opts.position.x === 'right' ||\n      opts.position.y === 'top' ||\n      opts.position.y === 'bottom'\n    ) {\n      let anchorXOverlap = false\n      let anchorYOverlap = false\n\n      if (anchorXElement !== document.body) {\n        let anchorXLeftOverlap = (\n          (left >= anchorXLeft && left < (anchorXLeft + anchorXWidth)) ||\n          (left < anchorXLeft && (left + modalWidth) >= anchorXLeft)\n        )\n\n        let anchorXTopOverlap = (\n          (top >= anchorXTop && top < (anchorXTop + anchorXHeight)) ||\n          (top < anchorXTop && (top + modalHeight) >= anchorXTop)\n        )\n\n        anchorXOverlap = anchorXLeftOverlap && anchorXTopOverlap\n      }\n\n      if (anchorYElement !== document.body) {\n        let anchorYLeftOverlap = (\n          (left >= anchorYLeft && left < (anchorYLeft + anchorYWidth)) ||\n          (left < anchorYLeft && (left + modalWidth) >= anchorYLeft)\n        )\n\n        let anchorYTopOverlap = (\n          (top >= anchorYTop && top < (anchorYTop + anchorYHeight)) ||\n          (top < anchorYTop && (top + modalHeight) >= anchorYTop)\n        )\n\n        anchorYOverlap = anchorYLeftOverlap && anchorYTopOverlap\n      }\n\n      if (anchorXOverlap || anchorYOverlap) {\n        if (!adjustTopPositionFirst) {\n          if (opts.position.x === 'left') {\n            if (!final) {\n              opts.position.x = 'right'\n              return minitaur.setDimensions(modal, opts, true)\n            }\n          } else {\n            opts.position.x = 'left'\n            return minitaur.setDimensions(modal, opts, true)\n          }\n        } else {\n          if (opts.position.y === 'top') {\n            if (!final) {\n              opts.position.y = 'bottom'\n              return minitaur.setDimensions(modal, opts, true)\n            }\n          } else {\n            opts.position.y = 'top'\n            return minitaur.setDimensions(modal, opts, true)\n          }\n        }\n      }\n    }\n  }\n\n  minitaur.setStyle(modal, minitaur.mergeObjects({ zIndex: opts.takeover ? 99999 : null }, opts.style || {}, opts.openStyle || {}, {\n    position: 'absolute',\n    left: left + 'px',\n    top: top + 'px',\n    width: width + 'px',\n    height: height + 'px'\n  }))\n\n  return true\n}\n\nminitaur.setStyle = (element, styles) => {\n  if (window.minitaurDebug) console.log('minitaur.setStyle (' + (element.id ? '#' + element.id : element.tagName) + '):', styles)\n\n  for (let property in styles) {\n    element.style[property] = styles[property]\n  }\n}\n\nminitaur.toggle = (modals, options) => {\n  modals = minitaur.getModals(modals, true)\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      if (window.minitaurDebug) console.log('minitaur.toggle (#' + modal.id + '):', options)\n\n      if (modal.minitaur.isOpen) {\n        modal.minitaur.close(options)\n      } else {\n        modal.minitaur.open(options)\n      }\n    })(modals[i])\n  }\n}\n\nminitaur.triggerEvent = (e) => {\n  const actions = ['close', 'open', 'toggle']\n  let triggerElement = e.currentTarget\n  const opts = minitaur.mergeObjects(minitaur.parseAttributes(triggerElement.dataset), { triggerElement: triggerElement })\n\n  for (let i = 0; i < actions.length; i++) {\n    let action = actions[i]\n    let targetElements = triggerElement.getAttribute('data-minitaur-' + action)\n\n    if (targetElements) {\n      if (window.minitaurDebug) console.log('minitaur.triggerEvent:', targetElements, opts)\n      minitaur[action](targetElements, opts)\n    }\n  }\n}\n\nexport default minitaur\n"],"names":["minitaur","mount","options","elements","modals","constructor","Object","mergeObjects","defaultOptions","document","querySelectorAll","HTMLElement","id","getElementById","createElement","getModals","length","i","modal","beforeInit","modalCount","funcs","close","get","parseBreakpoints","kill","putBack","open","set","value","toggle","opts","parseOptions","parseAttributes","dataset","isOpen","parentNode","body","originalElement","cloneNode","originalElementIndex","Array","prototype","indexOf","call","childNodes","originalElementParent","removeChild","setAttribute","window","minitaurDebug","console","log","class","c","classList","add","setStyle","style","closeStyle","initiateTriggers","appendChild","opened","afterInit","push","initiated","addEventListener","documentClick","documentResize","documentScroll","templates","afterClose","afterOpen","anchor","backdropClass","backdropClosingStyle","backdropOpeningStyle","backdropStyle","backgroundColor","beforeClose","beforeOpen","breakpoints","closeClass","closeDuration","closingClass","closingStyle","closeOnFocusOut","display","visibility","content","openClass","openDuration","openingClass","openingStyle","openStyle","parameters","position","respectAnchorSpacing","stayInBounds","takeover","template","triggers","clearTimers","resizeTimer","clearTimeout","closeDurationTimer","openDurationTimer","remove","backdrop","removeAttribute","querySelector","scrollX","parseInt","left","scrollY","top","height","width","scrollTo","setTimeout","dispatchEvent","Event","bubbles","e","element","target","closeModals","minitaurIgnore","contains","x","y","verify","breakpointOpts","breakpoint","documentElement","clientWidth","verifiedElements","warn","actions","trigger","action","events","reduce","validTriggers","isArray","t","includes","triggerElement","triggerElementTargets","getAttribute","triggerElementEvents","split","join","te","triggerEvent","a","triggerElements","ae","triggerEvents","triggerTargets","aee","append","insertBefore","prepend","nullActions","triggerElementTargetIndex","splice","removeEventListener","isObject","obj","objects","prev","keys","forEach","key","pVal","oVal","filter","index","array","innerHTML","templateContentElement","templateContent","templateClone","templateHasContentElement","apply","from","startsWith","replace","parameter","RegExp","right","bottom","zIndex","clientHeight","setDimensions","data","keyPrefix","arrayParameters","objectParameters","deepObjectParameters","validParameters","concat","substring","toLowerCase","property","charAt","propSet","o","objKey","objProp","objPropKey","match","final","anchorXElement","anchorYElement","modalClone","opacity","transition","modalStyle","getComputedStyle","anchorXRect","getBoundingClientRect","anchorXLeft","anchorXTop","anchorXWidth","anchorXHeight","anchorYRect","anchorYLeft","anchorYTop","anchorYWidth","anchorYHeight","modalMarginLeft","parseFloat","getPropertyValue","modalMarginTop","modalMarginRight","modalMarginBottom","modalWidth","offsetWidth","modalHeight","offsetHeight","boundaryX","boundaryY","adjustTopPositionFirst","innerWidth","innerHeight","anchorXStyle","anchorYStyle","anxhorX","rect","boundary","anxhorY","scroll","substr","Number","isFinite","anchorXOverlap","anchorYOverlap","anchorXLeftOverlap","anchorXTopOverlap","anchorYLeftOverlap","anchorYTopOverlap","styles","tagName","currentTarget","targetElements"],"mappings":"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"}