{"version":3,"file":"minitaur.js","sources":["../src/minitaur.js"],"sourcesContent":["/*!\n  minitaur v0.2.1 (https://minitaur.js.org)\n  by Kodie Grantham (https://kodieg.com)\n*/\n\nconst minitaur = (mount, options) => {\n  let elements = []\n  let modals = []\n\n  if (mount && mount.constructor === Object) {\n    options = mount\n    mount = null\n  }\n\n  options = minitaur.mergeObjects(minitaur.defaultOptions, options || {})\n\n  if (!mount) mount = options.mount\n\n  if (typeof mount === 'string') {\n    elements = document.querySelectorAll(mount)\n  } else if (mount instanceof HTMLElement) {\n    elements = [mount]\n  } else if (!mount) {\n    if (options.id) {\n      elements = [document.getElementById(options.id) || document.createElement('div')]\n    } else {\n      elements = [document.createElement('div')]\n    }\n  }\n\n  elements = minitaur.getModals(elements)\n\n  if (elements && elements.length) {\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        if (modal.minitaur) {\n          return true\n        }\n\n        if (options.beforeInit && options.beforeInit(modal) === false) {\n          return false\n        }\n\n        minitaur.modalCount++\n\n        let funcs = {\n          close: function (options) {\n            return minitaur.close(modal, options)\n          },\n          get: function (parseBreakpoints) {\n            return minitaur.get(modal, parseBreakpoints, false)\n          },\n          kill: function (putBack) {\n            return minitaur.kill(modal, putBack)\n          },\n          open: function (options) {\n            return minitaur.open(modal, options)\n          },\n          set: function (options, value) {\n            return minitaur.set(modal, options, value)\n          },\n          toggle: function (options) {\n            return minitaur.toggle(modal, options)\n          }\n        }\n\n        let opts = minitaur.parseOptions(minitaur.mergeObjects(options, minitaur.parseAttributes(modal.dataset), funcs, {\n          isOpen: false\n        }))\n\n        if (modal.parentNode && modal.parentNode !== document.body) {\n          opts.originalElement = modal.cloneNode(true)\n          opts.originalElementIndex = Array.prototype.indexOf.call(modal.parentNode.childNodes, modal)\n          opts.originalElementParent = modal.parentNode\n          modal.parentNode.removeChild(modal)\n        }\n\n        modal.minitaur = opts\n        modal.setAttribute('data-minitaur', '')\n\n        opts = minitaur.get(modal, true, false)\n\n        if (opts.id) {\n          modal.id = opts.id\n        } else if (!modal.id) {\n          modal.id = 'minitaur-' + minitaur.modalCount\n        }\n\n        if (window.minitaurDebug) console.log('minitaur.init (#' + modal.id + '):', opts)\n\n        if (opts.class) {\n          if (typeof opts.class === 'string') {\n            opts.class = [opts.class]\n          }\n\n          for (let c = 0; c < opts.class.length; c++) {\n            modal.classList.add(opts.class[c])\n          }\n        }\n\n        minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.closeStyle || {}))\n        minitaur.initializeTriggers(modal)\n\n        if (!modal.parentNode) {\n          document.body.appendChild(modal)\n        }\n\n        if (opts.opened) {\n          modal.minitaur.open()\n        } else {\n          modal.minitaur.close()\n        }\n\n        if (opts.afterInit) {\n          options.afterInit(modal)\n        }\n\n        modals.push(modal)\n      })(elements[i])\n    }\n  }\n\n  if (!minitaur.initialized) {\n    minitaur.initialized = true\n\n    document.addEventListener('click', minitaur.documentClick)\n    window.addEventListener('resize', minitaur.documentResize)\n    window.addEventListener('scroll', minitaur.documentScroll)\n  }\n\n  if (modals.length) {\n    if (modals.length === 1) {\n      return modals[0]\n    }\n\n    return modals\n  }\n\n  return false\n}\n\nminitaur.initialized = false\nminitaur.modalCount = 0\nminitaur.templates = {}\n\nminitaur.defaultOptions = {\n  afterClose: null,\n  afterInit: null,\n  afterOpen: null,\n  anchor: null,\n  backdropClass: 'minitaur-backdrop',\n  backdropClosingStyle: null,\n  backdropOpeningStyle: null,\n  backdropStyle: {\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  beforeClose: null,\n  beforeInit: null,\n  beforeOpen: null,\n  breakpoints: null,\n  class: 'minitaur',\n  closeClass: 'closed',\n  closeDuration: 0,\n  closingClass: 'closing',\n  closingStyle: null,\n  closeOnFocusOut: true,\n  closeStyle: {\n    display: 'none',\n    visibility: 'hidden'\n  },\n  content: null,\n  id: null,\n  mount: '.minitaur, [data-minitaur]',\n  opened: false,\n  openClass: 'opened',\n  openDuration: 0,\n  openingClass: 'opening',\n  openingStyle: {\n    display: 'block',\n    visibility: 'visible'\n  },\n  openStyle: null,\n  overrides: null,\n  parameters: null,\n  position: 'middle',\n  respectAnchorSpacing: false,\n  stayInBounds: true,\n  style: null,\n  takeover: false,\n  template: null,\n  triggers: []\n}\n\nminitaur.clearTimers = function (modal) {\n  if (minitaur.resizeTimer) {\n    clearTimeout(minitaur.resizeTimer)\n    minitaur.resizeTimer = null\n  }\n\n  if (modal) {\n    if (modal.minitaur.closeDurationTimer) {\n      clearTimeout(modal.minitaur.closeDurationTimer)\n      modal.minitaur.closeDurationTimer = null\n    }\n\n    if (modal.minitaur.openDurationTimer) {\n      clearTimeout(modal.minitaur.openDurationTimer)\n      modal.minitaur.openDurationTimer = null\n    }\n  }\n}\n\nminitaur.close = (modals, options) => {\n  modals = minitaur.getModals(modals, true)\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      const opts = minitaur.parseOptions(minitaur.mergeObjects(minitaur.get(modal, true, false), modal.minitaurTempOpts || {}, options || {}))\n\n      delete modal.minitaurTempOpts\n\n      if (window.minitaurDebug) console.log('minitaur.close (#' + modal.id + '):', opts)\n\n      minitaur.clearTimers(modal)\n\n      if (opts.beforeClose && opts.beforeClose(modal, opts) === false) {\n        return false\n      }\n\n      modal.classList.remove(opts.openClass)\n      modal.classList.remove(opts.openingClass)\n      modal.classList.add(opts.closingClass)\n      minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.closingStyle || {}))\n\n      let backdrop = null\n\n      if (opts.takeover) {\n        modal.removeAttribute('data-minitaur-taking-over')\n\n        backdrop = document.querySelector('[data-minitaur-backdrop=\"#' + modal.id + '\"]')\n\n        if (backdrop) {\n          backdrop.classList.remove(opts.openClass)\n          backdrop.classList.remove(opts.openingClass)\n          backdrop.classList.add(opts.closingClass)\n\n          const scrollX = parseInt(document.body.style.left || '0') * -1\n          const scrollY = parseInt(document.body.style.top || '0') * -1\n\n          minitaur.setStyle(backdrop, opts.backdropClosingStyle || {})\n\n          minitaur.setStyle(document.body, {\n            position: 'relative',\n            left: null,\n            top: null,\n            height: null,\n            width: null\n          })\n\n          window.scrollTo(scrollX, scrollY)\n        }\n      }\n\n      modal.minitaur.closeDurationTimer = setTimeout(function () {\n        modal.minitaur.isOpen = false\n\n        modal.classList.remove(opts.closingClass)\n        modal.classList.add(opts.closeClass)\n\n        if (opts.takeover && backdrop) {\n          document.body.removeChild(backdrop)\n          window.addEventListener('scroll', minitaur.documentScroll)\n        }\n\n        minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.closeStyle || {}))\n\n        modal.dispatchEvent(new Event('close', { bubbles: true }))\n\n        if (opts.afterClose) {\n          opts.afterClose(modal, opts)\n        }\n      }, opts.closeDuration || 0)\n    })(modals[i])\n  }\n}\n\nminitaur.documentClick = (e) => {\n  let element = e.target\n  let closeModals = true\n\n  do {\n    if (element === document.body) break\n    if (\n      element.minitaur ||\n      element.minitaurIgnore ||\n      element.classList.contains('minitaur-ignore')\n    ) closeModals = false\n  } while ((element = element.parentNode))\n\n  if (closeModals) {\n    const modals = minitaur.getModals('[data-minitaur]', true)\n\n    for (let i = 0; i < modals.length; i++) {\n      let modal = modals[i]\n\n      if (modal.minitaur.closeOnFocusOut && modal.minitaur.isOpen === true) {\n        modal.minitaur.close()\n      }\n    }\n  }\n}\n\nminitaur.documentResize = (e) => {\n  minitaur.clearTimers()\n\n  minitaur.resizeTimer = setTimeout(function () {\n    const elements = minitaur.getModals('[data-minitaur]', true)\n\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        if (modal.minitaur.isOpen) {\n          modal.minitaur.open()\n        }\n      })(elements[i])\n    }\n  }, 60)\n}\n\nminitaur.documentScroll = (e) => {\n  minitaur.clearTimers()\n\n  minitaur.resizeTimer = setTimeout(function () {\n    const elements = minitaur.getModals('[data-minitaur]', true)\n\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        const opts = modal.minitaur\n\n        if (opts.isOpen && !opts.takeover && (opts.anchor.x === 'viewport' || opts.anchor.y === 'viewport')) {\n          modal.minitaur.open()\n        }\n      })(elements[i])\n    }\n  }, 60)\n}\n\nminitaur.get = (elements, parseBreakpoints, verify) => {\n  elements = minitaur.getModals(elements, verify)\n\n  let modals = []\n\n  for (let i = 0; i < elements.length; i++) {\n    (function (modal) {\n      let opts = minitaur.mergeObjects(modal.minitaur, { element: modal })\n\n      if (opts.overrides) {\n        for (let selector in opts.overrides) {\n          if (modal.matches(selector)) {\n            opts = minitaur.mergeObjects(opts, opts.overrides[selector])\n          }\n        }\n\n        delete opts.overrides\n      }\n\n      if (parseBreakpoints && opts.breakpoints) {\n        let breakpointOpts = null\n\n        for (let breakpoint in opts.breakpoints) {\n          if (document.documentElement.clientWidth >= parseInt(breakpoint)) {\n            breakpointOpts = opts.breakpoints[breakpoint]\n          }\n        }\n\n        if (breakpointOpts) {\n          opts = minitaur.mergeObjects(opts, breakpointOpts)\n        }\n\n        delete opts.breakpoints\n      }\n\n      modals.push(opts)\n    })(elements[i])\n  }\n\n  if (modals.length) {\n    if (modals.length === 1) {\n      return modals[0]\n    }\n\n    return modals\n  }\n\n  return false\n}\n\nminitaur.getModals = (elements, verify) => {\n  if (typeof elements === 'string') {\n    elements = document.querySelectorAll(elements)\n  } else if (elements instanceof HTMLElement) {\n    elements = [elements]\n  }\n\n  if (verify) {\n    let verifiedElements = []\n\n    for (let i = 0; i < elements.length; i++) {\n      (function (modal) {\n        if (!modal.minitaur) {\n          console.warn('Element doesn\\'t appear to be a minitaur instance:', modal)\n          return\n        }\n\n        verifiedElements.push(modal)\n      })(elements[i])\n    }\n\n    return verifiedElements\n  }\n\n  return elements\n}\n\nminitaur.initializeTriggers = (modals) => {\n  modals = minitaur.getModals(modals, true)\n\n  let actions = ['close', 'open', 'toggle']\n\n  for (let i = 0; i < modals.length; i++) {\n    const modal = modals[i]\n    let opts = minitaur.get(modal, true, false)\n    let triggers = opts.triggers || opts.trigger\n\n    if (typeof triggers === 'string') {\n      triggers = [{\n        action: 'toggle',\n        elements: triggers,\n        events: ['click']\n      }]\n    } else if (!triggers) {\n      triggers = []\n    }\n\n    triggers = triggers.reduce((validTriggers, trigger) => {\n      if (Array.isArray(trigger)) {\n        trigger.elements = trigger\n      } else if (!trigger.elements) {\n        console.warn('(minitaur: #' + modal.id + ') A trigger is missing it\\'s elements option.', trigger)\n        return validTriggers\n      }\n\n      validTriggers.push(trigger)\n      return validTriggers\n    }, [])\n\n    for (let t = 0; t < triggers.length; t++) {\n      let trigger = triggers[t]\n\n      if (typeof trigger === 'string') {\n        trigger = {\n          action: 'toggle',\n          elements: trigger,\n          events: ['click']\n        }\n      }\n\n      if (typeof trigger.elements === 'string') {\n        trigger.elements = document.querySelectorAll(trigger.elements)\n      } else if (trigger.elements instanceof HTMLElement) {\n        trigger.elements = [trigger.elements]\n      }\n\n      if (!trigger.events) {\n        trigger.events = ['click']\n      } else if (typeof trigger.events === 'string') {\n        trigger.events = [trigger.events]\n      }\n\n      if (!trigger.action || !actions.includes(trigger.action)) {\n        trigger.action = 'toggle'\n      }\n\n      for (let e = 0; e < trigger.elements.length; e++) {\n        const triggerElement = trigger.elements[e]\n        let triggerElementTargets = triggerElement.getAttribute('data-minitaur-' + trigger.action)\n        let triggerElementEvents = triggerElement.getAttribute('data-minitaur-event')\n\n        if (triggerElementTargets) {\n          triggerElementTargets = triggerElementTargets.split(',')\n\n          if (!triggerElementTargets.includes('#' + modal.id)) {\n            triggerElementTargets.push('#' + modal.id)\n            triggerElement.setAttribute('data-minitaur-' + trigger.action, triggerElementTargets.join(','))\n          }\n        } else {\n          triggerElement.setAttribute('data-minitaur-' + trigger.action, '#' + modal.id)\n        }\n\n        if (triggerElementEvents) {\n          triggerElementEvents = triggerElementEvents.split(',')\n\n          for (let te = 0; te < trigger.events.length; te++) {\n            const triggerEvent = trigger.events[te]\n\n            if (!triggerElementEvents.includes(triggerEvent)) {\n              triggerElementEvents.push(triggerEvent)\n            }\n          }\n\n          triggerElement.setAttribute('data-minitaur-event', triggerElementEvents.join(','))\n        } else {\n          triggerElement.setAttribute('data-minitaur-event', trigger.events.join(','))\n        }\n      }\n    }\n\n    for (let a = 0; a < actions.length; a++) {\n      const action = actions[a]\n      const triggerElements = document.querySelectorAll('[data-minitaur-' + action + '=\"#' + modal.id + '\"], #' + modal.id + ' [data-minitaur-' + action + '=\"\"]')\n\n      for (let ae = 0; ae < triggerElements.length; ae++) {\n        (function (triggerElement) {\n          let triggerEvents = triggerElement.getAttribute('data-minitaur-event')\n          let triggerTargets = triggerElement.getAttribute('data-minitaur-' + action)\n\n          if (triggerTargets === '') {\n            triggerElement.setAttribute('data-minitaur-' + action, '#' + modal.id)\n          }\n\n          if (triggerEvents) {\n            triggerEvents = triggerEvents.split(',')\n          } else {\n            triggerEvents = ['click']\n            triggerElement.setAttribute('data-minitaur-event', 'click')\n          }\n\n          for (let aee = 0; aee < triggerEvents.length; aee++) {\n            let triggerEvent = triggerEvents[aee]\n            triggerElement.addEventListener(triggerEvent, minitaur.triggerEvent)\n          }\n\n          triggerElement.minitaurIgnore = true\n          triggerElement.setAttribute('data-minitaur-trigger', '')\n        })(triggerElements[ae])\n      }\n    }\n  }\n}\n\nminitaur.kill = (modals, putBack) => {\n  modals = minitaur.getModals(modals, true)\n\n  const actions = ['close', 'open', 'toggle']\n  const triggerElements = document.querySelectorAll('[data-minitaur-trigger]')\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      const opts = minitaur.get(modal, true, false)\n\n      if (opts.isOpen) opts.close()\n\n      document.body.removeChild(modal)\n\n      if (putBack !== false) {\n        if (opts.originalElement && opts.originalElementParent && opts.originalElementIndex) {\n          if (opts.originalElementIndex) {\n            if (opts.originalElementIndex > opts.originalElementParent.childNodes.length - 1) {\n              opts.originalElementParent.append(opts.originalElement)\n            } else {\n              opts.originalElementParent.insertBefore(\n                opts.originalElement,\n                opts.originalElementParent.childNodes[opts.originalElementIndex]\n              )\n            }\n          } else {\n            opts.originalElementParent.prepend(opts.originalElement)\n          }\n        }\n      }\n\n      for (let t = 0; t < triggerElements.length; t++) {\n        const triggerElement = triggerElements[t]\n        let nullActions = 0\n\n        for (let a = 0; a < actions.length; a++) {\n          const action = actions[a]\n          let triggerElementTargets = triggerElement.getAttribute('data-minitaur-' + action)\n\n          if (triggerElementTargets) {\n            triggerElementTargets = triggerElementTargets.split(',')\n\n            let triggerElementTargetIndex = triggerElementTargets.indexOf('#' + modal.id)\n\n            if (triggerElementTargetIndex !== -1) {\n              triggerElementTargets.splice(triggerElementTargetIndex, 1)\n\n              if (!triggerElementTargets.length) {\n                nullActions++\n              }\n            }\n          } else {\n            nullActions++\n          }\n        }\n\n        if (nullActions === actions.length) {\n          let triggerEvents = triggerElement.getAttribute('data-minitaur-event')\n          triggerEvents = triggerEvents ? triggerEvents.split(',') : []\n\n          triggerElement.removeAttribute('data-minitaur-event')\n          triggerElement.removeAttribute('data-minitaur-trigger')\n\n          for (let e = 0; e < triggerEvents.length; e++) {\n            triggerElement.removeEventListener(triggerEvents[e], minitaur.triggerEvent)\n          }\n\n          delete triggerElement.minitaurIgnore\n        }\n      }\n\n      minitaur.modalCount--\n    })(modals[i])\n  }\n\n  if (!minitaur.modalCount) {\n    document.removeEventListener('click', minitaur.documentClick)\n    window.removeEventListener('resize', minitaur.documentResize)\n    window.removeEventListener('scroll', minitaur.documentScroll)\n\n    minitaur.initialized = false\n  }\n}\n\nminitaur.mergeObjects = (...objects) => {\n  const isObject = function (obj) { return obj && typeof obj === 'object' && !(obj instanceof HTMLElement) }\n\n  return objects.reduce((prev, obj) => {\n    Object.keys(obj).forEach((key) => {\n      const pVal = prev[key]\n      const oVal = obj[key]\n\n      if (Array.isArray(pVal) && Array.isArray(oVal)) {\n        prev[key] = [...pVal, ...oVal].filter((element, index, array) => {\n          return array.indexOf(element) === index\n        })\n      } else if (isObject(pVal) && isObject(oVal)) {\n        prev[key] = minitaur.mergeObjects(pVal, oVal)\n      } else {\n        prev[key] = oVal\n      }\n    })\n\n    return prev\n  }, {})\n}\n\nminitaur.open = (modals, options) => {\n  modals = minitaur.getModals(modals, true)\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      const opts = minitaur.parseOptions(minitaur.mergeObjects(minitaur.get(modal, true, false), options || {}))\n\n      modal.minitaurTempOpts = opts\n\n      if (window.minitaurDebug) console.log('minitaur.open (#' + modal.id + '):', opts)\n\n      minitaur.clearTimers(modal)\n\n      if (opts.beforeOpen && opts.beforeOpen(modal, opts) === false) {\n        return false\n      }\n\n      if (opts.content) {\n        if (typeof opts.content === 'function') {\n          opts.content = opts.content(modal)\n        }\n\n        if (modal.innerHTML !== opts.content) {\n          modal.innerHTML = opts.content\n        }\n      }\n\n      if (opts.template) {\n        const templateContentElement = modal.querySelector('.minitaur-content')\n        let templateContent = modal.innerHTML\n        let template = minitaur.templates[opts.template] || opts.template\n\n        if (templateContentElement) {\n          templateContent = templateContentElement.innerHTML\n        }\n\n        if (typeof template === 'function') {\n          template = template(modal)\n        }\n\n        const templateClone = document.createElement('div')\n        templateClone.innerHTML = template\n        const templateHasContentElement = !!templateClone.querySelector('.minitaur-content')\n        templateClone.remove()\n\n        if (!templateHasContentElement) {\n          templateContent = `<div class=\"minitaur-content\">${templateContent}</div>`\n        }\n\n        modal.classList.remove.apply(modal.classList, Array.from(modal.classList).filter(c => c.startsWith('minitaur-template-')))\n\n        if (minitaur.templates[opts.template]) {\n          modal.classList.add('minitaur-template-' + opts.template)\n        }\n\n        modal.innerHTML = template.replace('{minitaur-content}', templateContent)\n      }\n\n      if (opts.parameters) {\n        for (let parameter in opts.parameters) {\n          modal.innerHTML = modal.innerHTML.replace(\n            new RegExp('{' + parameter + '}', 'g'),\n            opts.parameters[parameter]\n          )\n        }\n      }\n\n      modal.classList.remove(opts.closeClass)\n      modal.classList.remove(opts.closingClass)\n      modal.classList.add(opts.openingClass)\n      minitaur.setStyle(modal, minitaur.mergeObjects(opts.style || {}, opts.openingStyle || {}))\n\n      let backdrop = null\n\n      if (opts.takeover && !document.querySelector('#' + modal.id + '-backdrop')) {\n        window.removeEventListener('scroll', minitaur.documentScroll)\n\n        minitaur.close('[data-minitaur][data-minitaur-taking-over]')\n\n        backdrop = document.createElement('div')\n\n        backdrop.id = modal.id + '-backdrop'\n\n        modal.setAttribute('data-minitaur-taking-over', '')\n        backdrop.setAttribute('data-minitaur-backdrop', '#' + modal.id)\n        backdrop.classList.add(opts.backdropClass)\n        backdrop.classList.add(opts.openingClass)\n\n        minitaur.setStyle(backdrop, minitaur.mergeObjects({\n          position: 'absolute',\n          left: '0px',\n          top: '0px',\n          right: '0px',\n          bottom: '0px',\n          zIndex: 99998\n        }, opts.backdropOpeningStyle || {}))\n\n        minitaur.setStyle(document.body, {\n          position: 'fixed',\n          left: '-' + window.scrollX + 'px',\n          top: '-' + window.scrollY + 'px',\n          height: document.body.clientHeight + 'px',\n          width: document.body.clientWidth + 'px'\n        })\n\n        document.body.insertBefore(backdrop, modal)\n      } else {\n        minitaur.setStyle(document.body, { position: 'relative' })\n      }\n\n      modal.minitaur.openDurationTimer = setTimeout(function () {\n        modal.minitaur.isOpen = true\n\n        modal.classList.remove(opts.openingClass)\n        modal.classList.add(opts.openClass)\n\n        if (opts.takeover && backdrop) {\n          backdrop.classList.remove(opts.openingClass)\n          backdrop.classList.add(opts.openClass)\n          minitaur.setStyle(backdrop, opts.backdropStyle || {})\n        }\n\n        minitaur.setDimensions(modal, opts)\n        minitaur.initializeTriggers(modal)\n\n        modal.dispatchEvent(new Event('open', { bubbles: true }))\n\n        if (opts.afterOpen) {\n          opts.afterOpen(modal, opts)\n        }\n      }, opts.openDuration || 0)\n    })(modals[i])\n  }\n}\n\nminitaur.parseAttributes = (data) => {\n  let opts = {}\n  const keyPrefix = 'minitaur'\n  const arrayParameters = ['class']\n  const objectParameters = ['anchor', 'backdropStyle', 'breakpoints', 'closeStyle', 'openStyle', 'parameters', 'position', 'respectAnchorSpacing', 'style']\n  const deepObjectParameters = ['breakpoints']\n  const validParameters = Object.keys(minitaur.defaultOptions).concat(['triggerElement'])\n\n  for (let key in data) {\n    if (key !== keyPrefix && key.substring(0, keyPrefix.length).toLowerCase() === keyPrefix.toLowerCase()) {\n      const property = key.charAt(keyPrefix.length).toLowerCase() + key.substring(keyPrefix.length + 1).replace('-', '')\n      let propSet = false\n      let value = data[key]\n\n      if (value.toLowerCase() === 'true' || !value.length) {\n        value = true\n      } else if (value.toLowerCase() === 'false') {\n        value = false\n      }\n\n      if (arrayParameters.includes(property)) {\n        value = value.split(',')\n      }\n\n      for (let o = 0; o < objectParameters.length; o++) {\n        const objKey = objectParameters[o]\n        const objProp = property.substring(0, objKey.length)\n\n        if (objProp.length !== property.length && objProp.toLowerCase() === objKey.toLowerCase()) {\n          let objPropKey = property.substring(objKey.length)\n          objPropKey = objPropKey[0].toLowerCase() + objPropKey.slice(1)\n\n          if (!opts[objKey]) {\n            opts[objKey] = {}\n          }\n\n          if (deepObjectParameters.includes(objProp)) {\n            let breakpoint = objPropKey.match(/^\\d+/)\n\n            if (breakpoint) {\n              opts[objKey][breakpoint[0]] = minitaur.parseAttributes({ [keyPrefix + objPropKey.substring(breakpoint[0].length)]: value })\n            } else {\n              opts[objKey] = minitaur.parseAttributes({ [keyPrefix + objPropKey]: value })\n            }\n          } else {\n            opts[objKey][objPropKey] = value\n          }\n\n          propSet = true\n          break\n        }\n      }\n\n      if (!propSet && validParameters.includes(property)) {\n        opts[property] = value\n      }\n    }\n  }\n\n  return opts\n}\n\nminitaur.parseOptions = (opts) => {\n  if (opts.takeover) opts.anchor = 'viewport'\n\n  if (!opts.anchor || typeof opts.anchor === 'string') {\n    opts.anchor = {\n      x: opts.anchor,\n      y: opts.anchor\n    }\n  }\n\n  if (!opts.position || typeof opts.position === 'string') {\n    opts.position = opts.position ? opts.position.split(' ') : ['middle']\n    opts.position = {\n      x: opts.position[1] || 'middle',\n      y: opts.position[0]\n    }\n  }\n\n  if (!opts.position.x) opts.position.x = 'middle'\n  if (!opts.position.y) opts.position.y = 'middle'\n\n  if (!opts.respectAnchorSpacing || typeof opts.respectAnchorSpacing === 'boolean') {\n    opts.respectAnchorSpacing = {\n      x: opts.respectAnchorSpacing,\n      y: opts.respectAnchorSpacing\n    }\n  }\n\n  if (!opts.respectAnchorSpacing.x) opts.respectAnchorSpacing.x = false\n  if (!opts.respectAnchorSpacing.y) opts.respectAnchorSpacing.y = false\n\n  return opts\n}\n\nminitaur.set = (modals, options, value) => {\n  modals = minitaur.getModals(modals, true)\n\n  if (typeof options === 'string') {\n    options = { [options]: value }\n  }\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      if (window.minitaurDebug) console.log('minitaur.set (#' + modal.id + '):', options)\n      modal.minitaur = minitaur.parseOptions(minitaur.mergeObjects(modal.minitaur, options || {}))\n    })(modals[i])\n  }\n}\n\nminitaur.setDimensions = (modal, options, final) => {\n  let opts = minitaur.get(modal, true, false)\n\n  opts = minitaur.mergeObjects(opts, options || {})\n\n  if (!opts.anchor.x) opts.anchor.x = opts.triggeredElement || document.body\n  if (!opts.anchor.y) opts.anchor.y = opts.triggeredElement || document.body\n\n  let anchorXElement = null\n  let anchorYElement = null\n\n  if (typeof opts.anchor.x === 'string') {\n    if (opts.anchor.x === 'viewport') {\n      anchorXElement = document.body\n    } else {\n      anchorXElement = document.querySelector(opts.anchor.x)\n    }\n  } else {\n    anchorXElement = opts.anchor.x\n  }\n\n  if (typeof opts.anchor.y === 'string') {\n    if (opts.anchor.y === 'viewport') {\n      anchorYElement = document.body\n    } else {\n      anchorYElement = document.querySelector(opts.anchor.y)\n    }\n  } else {\n    anchorYElement = opts.anchor.y\n  }\n\n  if (!(anchorXElement instanceof HTMLElement)) {\n    console.warn('(minitaur: #' + modal.id + ') Unable to find anchor.x:', anchorXElement)\n    anchorXElement = document.body\n  }\n\n  if (!(anchorYElement instanceof HTMLElement)) {\n    console.warn('(minitaur: #' + modal.id + ') Unable to find anchor.y:', anchorYElement)\n    anchorYElement = document.body\n  }\n\n  const modalClone = modal.cloneNode(true)\n\n  minitaur.setStyle(modalClone, minitaur.mergeObjects(opts.style || {}, opts.openStyle || {}, {\n    left: '0px',\n    opacity: '0',\n    position: 'absolute',\n    top: '0px',\n    transition: 'none'\n  }))\n\n  document.body.appendChild(modalClone)\n\n  const modalStyle = getComputedStyle(modalClone)\n  const anchorXRect = anchorXElement.getBoundingClientRect()\n  let anchorXLeft = anchorXRect.x + window.scrollX\n  let anchorXTop = anchorXRect.y + window.scrollY\n  let anchorXWidth = anchorXRect.width\n  let anchorXHeight = anchorXRect.height\n  let anchorYRect = anchorYElement.getBoundingClientRect()\n  let anchorYLeft = anchorYRect.x + window.scrollX\n  let anchorYTop = anchorYRect.y + window.scrollY\n  let anchorYWidth = anchorYRect.width\n  let anchorYHeight = anchorYRect.height\n  const modalMarginLeft = parseFloat(modalStyle.getPropertyValue('margin-left'))\n  const modalMarginTop = parseFloat(modalStyle.getPropertyValue('margin-top'))\n  const modalMarginRight = parseFloat(modalStyle.getPropertyValue('margin-right'))\n  const modalMarginBottom = parseFloat(modalStyle.getPropertyValue('margin-bottom'))\n  const modalWidth = modalClone.offsetWidth + modalMarginLeft + modalMarginRight\n  const modalHeight = modalClone.offsetHeight + modalMarginTop + modalMarginBottom\n  let left = 0\n  let top = 0\n  let width = parseFloat(modalClone.style.width || modalStyle.getPropertyValue('width'))\n  let height = parseFloat(modalClone.style.height || modalStyle.getPropertyValue('height'))\n  let boundaryX = document.body.clientWidth\n  let boundaryY = document.body.clientHeight\n  let adjustTopPositionFirst = false\n\n  document.body.removeChild(modalClone)\n\n  if (opts.anchor.x === 'viewport') {\n    anchorXLeft = window.scrollX\n    anchorXTop = window.scrollY\n    anchorXWidth = window.innerWidth\n    anchorXHeight = window.innerHeight\n    boundaryX = anchorXWidth + window.scrollX\n  }\n\n  if (opts.anchor.y === 'viewport') {\n    anchorYLeft = window.scrollX\n    anchorYTop = window.scrollY\n    anchorYWidth = window.innerWidth\n    anchorYHeight = window.innerHeight\n    boundaryY = anchorYHeight + window.scrollY\n  }\n\n  if (opts.takeover) {\n    anchorXLeft = 0 - parseInt(document.body.style.left || '0')\n    anchorXTop = 0 - parseInt(document.body.style.top || '0')\n    anchorYLeft = 0 - parseInt(document.body.style.left || '0')\n    anchorYTop = 0 - parseInt(document.body.style.top || '0')\n    boundaryX = anchorXLeft + window.innerWidth\n    boundaryY = anchorYTop + window.innerHeight\n  }\n\n  if (anchorXElement === document.body) {\n    switch (opts.position.x) {\n      case 'left':\n        opts.position.x = 'inner-left'\n        break\n      case 'right':\n        opts.position.x = 'inner-right'\n        break\n    }\n  }\n\n  if (anchorYElement === document.body) {\n    switch (opts.position.y) {\n      case 'top':\n        opts.position.y = 'inner-top'\n        break\n      case 'bottom':\n        opts.position.y = 'inner-bottom'\n        break\n    }\n  }\n\n  if (opts.respectAnchorSpacing.x) {\n    const anchorXStyle = getComputedStyle(anchorXElement)\n\n    switch (opts.position.x) {\n      case 'inner-left':\n        anchorXLeft += parseFloat(anchorXStyle.getPropertyValue('padding-left'))\n        break\n      case 'left':\n        anchorXLeft -= parseFloat(anchorXStyle.getPropertyValue('margin-left'))\n        break\n      case 'inner-right':\n        anchorXWidth -= parseFloat(anchorXStyle.getPropertyValue('padding-right'))\n        break\n      case 'right':\n        anchorXWidth += parseFloat(anchorXStyle.getPropertyValue('margin-right'))\n        break\n    }\n  }\n\n  if (opts.respectAnchorSpacing.y) {\n    const anchorYStyle = getComputedStyle(anchorYElement)\n\n    switch (opts.position.y) {\n      case 'inner-top':\n        anchorYTop += parseFloat(anchorYStyle.getPropertyValue('padding-top'))\n        break\n      case 'top':\n        anchorYTop -= parseFloat(anchorYStyle.getPropertyValue('margin-top'))\n        break\n      case 'inner-bottom':\n        anchorYHeight -= parseFloat(anchorYStyle.getPropertyValue('padding-bottom'))\n        break\n      case 'bottom':\n        anchorXHeight += parseFloat(anchorYStyle.getPropertyValue('margin-bottom'))\n        break\n    }\n  }\n\n  if (window.minitaurDebug) {\n    console.log('minitaur.setDimensions (#' + modal.id + '):', {\n      anxhorX: {\n        element: anchorXElement,\n        left: anchorXLeft,\n        top: anchorXTop,\n        width: anchorXWidth,\n        height: anchorXHeight,\n        rect: anchorXRect,\n        boundary: boundaryX\n      },\n      anxhorY: {\n        element: anchorYElement,\n        left: anchorYLeft,\n        top: anchorYTop,\n        width: anchorYWidth,\n        height: anchorYHeight,\n        rect: anchorYRect,\n        boundary: boundaryY\n      },\n      modal: {\n        height: modalHeight,\n        width: modalWidth\n      },\n      scroll: {\n        x: window.scrollX,\n        y: window.scrollY\n      }\n    })\n  }\n\n  switch (opts.position.x) {\n    case 'inner-left':\n      left = anchorXLeft\n      break\n    case 'left':\n      left = anchorXLeft - modalWidth - 1\n      break\n    case 'middle':\n      left = anchorXLeft + (anchorXWidth / 2) - (modalWidth / 2)\n      break\n    case 'inner-right':\n      left = anchorXLeft + anchorXWidth - modalWidth\n      break\n    case 'right':\n      left = anchorXLeft + anchorXWidth + 1\n      break\n    default:\n      if (typeof opts.position.x === 'string') {\n        if (opts.position.x[opts.position.x.length - 1] === '%') {\n          left = anchorXLeft + ((opts.position.x.substr(0, opts.position.x.length - 1) / 100) * anchorXWidth)\n        } else {\n          left = anchorXLeft + parseInt(opts.position.x)\n        }\n      } else if (Number.isFinite(opts.position.x)) {\n        left = anchorXLeft + opts.position.x\n      } else {\n        console.warn('minitaur (#' + modal.id + ') Invalid position.x value:', opts.position.x)\n        return false\n      }\n  }\n\n  switch (opts.position.y) {\n    case 'inner-top':\n      top = anchorYTop\n      break\n    case 'top':\n      top = anchorYTop - modalHeight - 1\n      break\n    case 'middle':\n      top = anchorYTop + (anchorYHeight / 2) - (modalHeight / 2)\n      break\n    case 'inner-bottom':\n      top = anchorYTop + anchorYHeight - modalHeight\n      break\n    case 'bottom':\n      top = anchorYTop + anchorYHeight + 1\n      break\n    default:\n      if (typeof opts.position.y === 'string') {\n        if (opts.position.y[opts.position.y.length - 1] === '%') {\n          top = anchorYTop + ((opts.position.y.substr(0, opts.position.y.length - 1) / 100) * anchorYHeight)\n        } else {\n          top = anchorYTop + parseInt(opts.position.y)\n        }\n      } else if (Number.isFinite(opts.position.y)) {\n        top = anchorYTop + opts.position.y\n      } else {\n        console.warn('minitaur (#' + modal.id + ') Invalid position.y value:', opts.position.y)\n        return false\n      }\n  }\n\n  if (opts.stayInBounds) {\n    if ((left + modalWidth) >= boundaryX) {\n      left = boundaryX - modalWidth\n    }\n\n    if (left < 0) {\n      left = 0\n    }\n\n    if ((top + modalHeight) >= boundaryY) {\n      top = boundaryY - modalHeight\n      adjustTopPositionFirst = true\n    }\n\n    if (top < 0) {\n      top = 0\n      adjustTopPositionFirst = true\n    }\n\n    if (\n      opts.position.x === 'left' ||\n      opts.position.x === 'right' ||\n      opts.position.y === 'top' ||\n      opts.position.y === 'bottom'\n    ) {\n      let anchorXOverlap = false\n      let anchorYOverlap = false\n\n      if (anchorXElement !== document.body) {\n        let anchorXLeftOverlap = (\n          (left >= anchorXLeft && left < (anchorXLeft + anchorXWidth)) ||\n          (left < anchorXLeft && (left + modalWidth) >= anchorXLeft)\n        )\n\n        let anchorXTopOverlap = (\n          (top >= anchorXTop && top < (anchorXTop + anchorXHeight)) ||\n          (top < anchorXTop && (top + modalHeight) >= anchorXTop)\n        )\n\n        anchorXOverlap = anchorXLeftOverlap && anchorXTopOverlap\n      }\n\n      if (anchorYElement !== document.body) {\n        let anchorYLeftOverlap = (\n          (left >= anchorYLeft && left < (anchorYLeft + anchorYWidth)) ||\n          (left < anchorYLeft && (left + modalWidth) >= anchorYLeft)\n        )\n\n        let anchorYTopOverlap = (\n          (top >= anchorYTop && top < (anchorYTop + anchorYHeight)) ||\n          (top < anchorYTop && (top + modalHeight) >= anchorYTop)\n        )\n\n        anchorYOverlap = anchorYLeftOverlap && anchorYTopOverlap\n      }\n\n      if (anchorXOverlap || anchorYOverlap) {\n        if (!adjustTopPositionFirst) {\n          if (opts.position.x === 'left') {\n            if (!final) {\n              opts.position.x = 'right'\n              return minitaur.setDimensions(modal, opts, true)\n            }\n          } else {\n            opts.position.x = 'left'\n            return minitaur.setDimensions(modal, opts, true)\n          }\n        } else {\n          if (opts.position.y === 'top') {\n            if (!final) {\n              opts.position.y = 'bottom'\n              return minitaur.setDimensions(modal, opts, true)\n            }\n          } else {\n            opts.position.y = 'top'\n            return minitaur.setDimensions(modal, opts, true)\n          }\n        }\n      }\n    }\n  }\n\n  minitaur.setStyle(modal, minitaur.mergeObjects({ zIndex: opts.takeover ? 99999 : null }, opts.style || {}, opts.openStyle || {}, {\n    position: 'absolute',\n    left: left + 'px',\n    top: top + 'px',\n    width: width + 'px',\n    height: height + 'px'\n  }))\n\n  return true\n}\n\nminitaur.setStyle = (element, styles) => {\n  if (window.minitaurDebug) console.log('minitaur.setStyle (' + (element.id ? '#' + element.id : element.tagName) + '):', styles)\n\n  for (let property in styles) {\n    element.style[property] = styles[property]\n  }\n}\n\nminitaur.toggle = (modals, options) => {\n  modals = minitaur.getModals(modals, true)\n\n  for (let i = 0; i < modals.length; i++) {\n    (function (modal) {\n      if (window.minitaurDebug) console.log('minitaur.toggle (#' + modal.id + '):', options)\n\n      if (modal.minitaur.isOpen) {\n        modal.minitaur.close(options)\n      } else {\n        modal.minitaur.open(options)\n      }\n    })(modals[i])\n  }\n}\n\nminitaur.triggerEvent = (e) => {\n  const actions = ['close', 'open', 'toggle']\n  const triggerElement = e.currentTarget\n  const opts = minitaur.mergeObjects(minitaur.parseAttributes(triggerElement.dataset), {\n    triggeredElement: triggerElement,\n    triggeredEvent: e\n  })\n\n  for (let i = 0; i < actions.length; i++) {\n    let action = actions[i]\n    let targetElements = triggerElement.getAttribute('data-minitaur-' + action)\n\n    if (targetElements) {\n      if (window.minitaurDebug) console.log('minitaur.triggerEvent:', targetElements, opts)\n      minitaur[action](targetElements, opts)\n    }\n  }\n}\n\nexport default minitaur\n"],"names":["minitaur","mount","options","elements","modals","constructor","Object","mergeObjects","defaultOptions","document","querySelectorAll","HTMLElement","id","getElementById","createElement","getModals","length","i","modal","beforeInit","modalCount","funcs","close","get","parseBreakpoints","kill","putBack","open","set","value","toggle","opts","parseOptions","parseAttributes","dataset","isOpen","parentNode","body","originalElement","cloneNode","originalElementIndex","Array","prototype","indexOf","call","childNodes","originalElementParent","removeChild","setAttribute","window","minitaurDebug","console","log","class","c","classList","add","setStyle","style","closeStyle","initializeTriggers","appendChild","opened","afterInit","push","initialized","addEventListener","documentClick","documentResize","documentScroll","templates","afterClose","afterOpen","anchor","backdropClass","backdropClosingStyle","backdropOpeningStyle","backdropStyle","backgroundColor","beforeClose","beforeOpen","breakpoints","closeClass","closeDuration","closingClass","closingStyle","closeOnFocusOut","display","visibility","content","openClass","openDuration","openingClass","openingStyle","openStyle","overrides","parameters","position","respectAnchorSpacing","stayInBounds","takeover","template","triggers","clearTimers","resizeTimer","clearTimeout","closeDurationTimer","openDurationTimer","minitaurTempOpts","remove","backdrop","removeAttribute","querySelector","scrollX","parseInt","left","scrollY","top","height","width","scrollTo","setTimeout","dispatchEvent","Event","bubbles","e","element","target","closeModals","minitaurIgnore","contains","x","y","verify","selector","matches","breakpointOpts","breakpoint","documentElement","clientWidth","verifiedElements","warn","actions","trigger","action","events","reduce","validTriggers","isArray","t","includes","triggerElement","triggerElementTargets","getAttribute","triggerElementEvents","split","join","te","triggerEvent","a","triggerElements","ae","triggerEvents","triggerTargets","aee","append","insertBefore","prepend","nullActions","triggerElementTargetIndex","splice","removeEventListener","isObject","obj","objects","prev","keys","forEach","key","pVal","oVal","filter","index","array","innerHTML","templateContentElement","templateContent","templateClone","templateHasContentElement","apply","from","startsWith","replace","parameter","RegExp","right","bottom","zIndex","clientHeight","setDimensions","data","keyPrefix","arrayParameters","objectParameters","deepObjectParameters","validParameters","concat","substring","toLowerCase","property","charAt","propSet","o","objKey","objProp","objPropKey","slice","match","final","triggeredElement","anchorXElement","anchorYElement","modalClone","opacity","transition","modalStyle","getComputedStyle","anchorXRect","getBoundingClientRect","anchorXLeft","anchorXTop","anchorXWidth","anchorXHeight","anchorYRect","anchorYLeft","anchorYTop","anchorYWidth","anchorYHeight","modalMarginLeft","parseFloat","getPropertyValue","modalMarginTop","modalMarginRight","modalMarginBottom","modalWidth","offsetWidth","modalHeight","offsetHeight","boundaryX","boundaryY","adjustTopPositionFirst","innerWidth","innerHeight","anchorXStyle","anchorYStyle","anxhorX","rect","boundary","anxhorY","scroll","substr","Number","isFinite","anchorXOverlap","anchorYOverlap","anchorXLeftOverlap","anchorXTopOverlap","anchorYLeftOverlap","anchorYTopOverlap","styles","tagName","currentTarget","triggeredEvent","targetElements"],"mappings":"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"}